"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8265],{8265:(w,p,a)=>{a.r(p),a.d(p,{ACitasPageModule:()=>y});var g=a(6895),n=a(433),i=a(2078),d=a(2435),h=a(655),t=a(4650),b=a(7556),A=a(1343);function Z(e,r){if(1&e&&(t.TgZ(0,"ion-select-option",16),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.uid),t.xp6(1),t.Oqu(o.nombre)}}const m=function(){return["/home"]},v=[{path:"",component:(()=>{class e{constructor(o,s,c,l,u){this.fb=o,this.auth=s,this.router=c,this.store=l,this.alertcontroller=u,this.pathpaciente="Pacientes",this.pathdoctor="Doctores",this.infodoctor=[],this.doctores=[],this.pacientes=[],this.doctor={uid:"",nombre:"",apellido:"",cedula:"",especialidad:"",correo:"",contrase\u00f1a:"",rol:"Doctor"},this.paciente={uid:"",nombre:"",apellido:"",cedula:"",fnacimiento:"",edad:0,correo:"",contrase\u00f1a:"",rol:"Paciente"},this.newcita={doctor:"",iddoctor:"",paciente:"",idpaciente:"",especialidad:"",fecha:new Date,hora:0,id:this.store.getId(),estado:""},this.acitasform=this.fb.group({doctor:new n.NI("",n.kI.required),fecha:new n.NI("",n.kI.required),hora:new n.NI("",n.kI.required)})}ngOnInit(){this.getdoctores()}getdoctores(){this.store.consultar(this.pathdoctor).subscribe(o=>{o&&(this.infodoctor=o)})}agregar(){return(0,h.mG)(this,void 0,void 0,function*(){var o=this.acitasform.value;const s=yield this.auth.getUid();let c=!1;this.uiddoctor=o.doctor,this.store.consultar(this.pathdoctor).subscribe(l=>{l&&(this.doctores=l,this.doctores.forEach(u=>(0,h.mG)(this,void 0,void 0,function*(){u.uid==this.uiddoctor&&(this.doctor=u,s&&(this.uidpaciente=s,this.store.consultar(this.pathpaciente).subscribe(f=>{f&&(this.pacientes=f,this.pacientes.forEach(C=>(0,h.mG)(this,void 0,void 0,function*(){if(C.uid==this.uidpaciente){if(this.paciente=C,this.acitasform.invalid)return void(yield(yield this.alertcontroller.create({header:"Datos incompletos",message:"Debe de ingresar todos los campos"})).present());c||(this.newcita.doctor=this.doctor.nombre+" "+this.doctor.apellido,this.newcita.especialidad=this.doctor.especialidad,this.newcita.fecha=o.fecha,this.newcita.hora=o.hora,this.newcita.iddoctor=this.doctor.uid,this.newcita.idpaciente=this.uidpaciente,this.newcita.paciente=this.paciente.nombre+" "+this.paciente.apellido,this.newcita.id=this.store.getId(),this.newcita.estado="En espera",console.log(this.newcita),this.store.createDoc(this.newcita,"Citas",this.newcita.id),c=!0,yield(yield this.alertcontroller.create({header:"Cita agregada"})).present(),this.router.navigate(["../home"]))}})))})))})))})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(n.qu),t.Y36(b.e),t.Y36(d.F0),t.Y36(A.C),t.Y36(i.Br))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-a-citas"]],decls:35,vars:6,consts:[["color","principal"],["color","blanco","fill","clear","slot","start",3,"routerLink"],["name","arrow-back-outline"],[1,"ion-padding"],[1,"form-container"],[1,"titulo"],[3,"formGroup","ngSubmit"],["position","stacked"],["color","danger"],["formControlName","doctor","interface","popover","placeholder","Selecciona Doctor"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","fecha","type","date"],["required","","formControlName","hora","type","time"],[1,"botones"],["color","secondary","expand","block","type","submit"],["color","light","expand","block","type","reset",3,"routerLink"],[3,"value"]],template:function(o,s){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Agendar Citas"),t.qZA(),t.TgZ(4,"ion-button",1),t._UZ(5,"ion-icon",2),t.qZA()()(),t.TgZ(6,"ion-content",3)(7,"div",4)(8,"h2",5),t._uU(9,"Nueva cita"),t.qZA(),t.TgZ(10,"form",6),t.NdJ("ngSubmit",function(){return s.agregar()}),t.TgZ(11,"ion-item")(12,"ion-label",7),t._uU(13,"Doctor "),t.TgZ(14,"ion-text",8),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"ion-select",9),t.YNc(17,Z,2,2,"ion-select-option",10),t.qZA()(),t.TgZ(18,"ion-item")(19,"ion-label",7),t._uU(20,"Fecha "),t.TgZ(21,"ion-text",8),t._uU(22,"*"),t.qZA()(),t._UZ(23,"ion-input",11),t.qZA(),t.TgZ(24,"ion-item")(25,"ion-label",7),t._uU(26,"Hora "),t.TgZ(27,"ion-text",8),t._uU(28,"*"),t.qZA()(),t._UZ(29,"ion-input",12),t.qZA(),t.TgZ(30,"div",13)(31,"ion-button",14),t._uU(32," Aceptar "),t.qZA(),t.TgZ(33,"ion-button",15),t._uU(34," Cancelar "),t.qZA()()()()()),2&o&&(t.xp6(4),t.Q6J("routerLink",t.DdM(4,m)),t.xp6(6),t.Q6J("formGroup",s.acitasform),t.xp6(7),t.Q6J("ngForOf",s.infodoctor),t.xp6(16),t.Q6J("routerLink",t.DdM(5,m)))},dependencies:[g.sg,n._Y,n.JJ,n.JL,n.Q7,i.YG,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.t9,i.n0,i.yW,i.wd,i.sr,i.QI,i.j9,i.YI,d.rH,n.sg,n.u],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:50%;margin-top:50px}.titulo[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:2rem}form[_ngcontent-%COMP%]{width:100%;max-width:500px;margin-bottom:2rem;padding:2rem;border-radius:10px;box-shadow:0 0 15px #0000001a}.botones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:4rem}',".form-container[_ngcontent-%COMP%] {\n    max-width: 400px;\n    margin: auto;\n  }\n  \n  .form-title[_ngcontent-%COMP%] {\n    font-size: 24px;\n    margin-bottom: 16px;\n  }\n  \n  ion-item[_ngcontent-%COMP%] {\n    margin-bottom: 16px;\n  }"]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(v),d.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,n.u5,i.Pc,P,n.UX]}),e})()}}]);