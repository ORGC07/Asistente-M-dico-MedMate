{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { FormControl, Validators } from '@angular/forms';\nimport { LocalNotifications } from \"@capacitor/local-notifications\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/firestore.service\";\nimport * as i5 from \"@ionic/angular\";\nconst _c0 = function () {\n  return [\"/home\"];\n};\nexport class MedicacionPage {\n  constructor(fb, auth, router, store, alertcontroller) {\n    this.fb = fb;\n    this.auth = auth;\n    this.router = router;\n    this.store = store;\n    this.alertcontroller = alertcontroller;\n    this.newmedicamento = {\n      medicamento: \"\",\n      cdias: 0,\n      fecha: \"\",\n      hora: 0,\n      userid: \"\",\n      nota: \"\",\n      id: this.store.getId()\n    };\n    this.medicamentoform = this.fb.group({\n      medicamento: new FormControl(\"\", Validators.required),\n      fecha: new FormControl(\"\", Validators.required),\n      hora: new FormControl(\"\", Validators.required),\n      nota: new FormControl(\"\", Validators.required),\n      nota: new FormControl(\"\", Validators.required)\n    });\n  }\n  ingresar() {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n      const uid = yield this.auth.getUid();\n      if (uid) {\n        this.uid = uid;\n      }\n      const path = \"Pacientes\";\n      this.store.getDoc(path, this.uid).subscribe(res => {\n        if (res) {\n          this.info = res;\n        }\n      });\n      if (((_a = this.info) === null || _a === void 0 ? void 0 : _a.uid) == this.uid) {\n        var f = this.medicamentoform.value;\n        if (this.medicamentoform.invalid) {\n          const alert = yield this.alertcontroller.create({\n            header: 'Datos incompletos',\n            message: 'Debe de ingresar todos los campos'\n          });\n          yield alert.present();\n          return;\n        } else {\n          this.newmedicamento.medicamento = f.medicamento, this.newmedicamento.cdias = f.fe;\n          this.newmedicamento.hora = f.hora;\n          this.newmedicamento.fecha = f.fecha;\n          this.newmedicamento.nota = f.nota;\n          this.newmedicamento.userid = this.uid;\n          this.newmedicamento.id = this.store.getId();\n          console.log(this.newmedicamento);\n          let notification = {\n            id: 1,\n            title: \"Recordatorio\",\n            body: \"¡Es hora de tomarte la medicina!\" + this.newmedicamento.medicamento,\n            schedule: {\n              on: {\n                year: 2023,\n                month: 4,\n                day: 7,\n                hour: 17,\n                minute: 30,\n                second: 0\n              }\n            },\n            sound: 'beep.aiff',\n            actions: [{\n              id: \"yes\",\n              title: \"Sí\"\n            }, {\n              id: \"no\",\n              title: \"No\"\n            }]\n          };\n          LocalNotifications.schedule({\n            notifications: [notification]\n          });\n          this.store.createDoc(this.newmedicamento, \"Medicamentos\", this.newmedicamento.id);\n          const alert2 = yield this.alertcontroller.create({\n            header: 'Medicamento agregado'\n          });\n          yield alert2.present();\n          this.router.navigate(['../home']);\n        }\n      }\n    });\n  }\n  ngOnInit() {}\n}\nMedicacionPage.ɵfac = function MedicacionPage_Factory(t) {\n  return new (t || MedicacionPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.FirestoreService), i0.ɵɵdirectiveInject(i5.AlertController));\n};\nMedicacionPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MedicacionPage,\n  selectors: [[\"app-medicacion\"]],\n  decls: 46,\n  vars: 3,\n  consts: [[\"color\", \"principal\"], [\"color\", \"blanco\", \"fill\", \"clear\", \"slot\", \"start\", 3, \"routerLink\"], [\"name\", \"arrow-back-outline\"], [1, \"container\"], [1, \"titulo\"], [1, \"formulario\", 3, \"formGroup\", \"ngSubmit\"], [\"position\", \"stacked\"], [\"color\", \"danger\"], [\"required\", \"\", \"formControlName\", \"medicamento\", \"type\", \"text\"], [\"required\", \"\", \"formControlName\", \"fecha\", \"type\", \"date\"], [\"required\", \"\", \"formControlName\", \"hora\", \"type\", \"time\"], [\"required\", \"\", \"formControlName\", \"cdias\", \"type\", \"number\"], [\"counter\", \"true\"], [\"required\", \"\", \"formControlName\", \"nota\", \"type\", \"text\", \"maxlength\", \"120\", \"inputmode\", \"text\"], [1, \"botones\"], [\"color\", \"secondary\", \"expand\", \"block\", \"type\", \"submit\"], [\"color\", \"light\", \"expand\", \"block\", \"type\", \"reset\"]],\n  template: function MedicacionPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n      i0.ɵɵtext(3, \"Medicacion\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ion-button\", 1);\n      i0.ɵɵelement(5, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"ion-content\")(7, \"div\", 3)(8, \"h1\", 4);\n      i0.ɵɵtext(9, \"Ingresar Medicamento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"form\", 5);\n      i0.ɵɵlistener(\"ngSubmit\", function MedicacionPage_Template_form_ngSubmit_10_listener() {\n        return ctx.ingresar();\n      });\n      i0.ɵɵelementStart(11, \"ion-item\")(12, \"ion-label\", 6);\n      i0.ɵɵtext(13, \"Medicamento \");\n      i0.ɵɵelementStart(14, \"ion-text\", 7);\n      i0.ɵɵtext(15, \"*\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(16, \"ion-input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"ion-item\")(18, \"ion-label\", 6);\n      i0.ɵɵtext(19, \"Fecha \");\n      i0.ɵɵelementStart(20, \"ion-text\", 7);\n      i0.ɵɵtext(21, \"*\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(22, \"ion-input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"ion-item\")(24, \"ion-label\", 6);\n      i0.ɵɵtext(25, \"Hora \");\n      i0.ɵɵelementStart(26, \"ion-text\", 7);\n      i0.ɵɵtext(27, \"*\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(28, \"ion-input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"ion-item\")(30, \"ion-label\", 6);\n      i0.ɵɵtext(31, \"Cantidad de dias \");\n      i0.ɵɵelementStart(32, \"ion-text\", 7);\n      i0.ɵɵtext(33, \"*\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(34, \"ion-input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"ion-item\", 12)(36, \"ion-label\", 6);\n      i0.ɵɵtext(37, \"Nota \");\n      i0.ɵɵelementStart(38, \"ion-text\", 7);\n      i0.ɵɵtext(39, \"*\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(40, \"ion-textarea\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 14)(42, \"ion-button\", 15);\n      i0.ɵɵtext(43, \" Aceptar \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"ion-button\", 16);\n      i0.ɵɵtext(45, \" Cancelar \");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formGroup\", ctx.medicamentoform);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.MaxLengthValidator, i5.IonButton, i5.IonContent, i5.IonHeader, i5.IonIcon, i5.IonInput, i5.IonItem, i5.IonLabel, i5.IonText, i5.IonTextarea, i5.IonTitle, i5.IonToolbar, i5.NumericValueAccessor, i5.TextValueAccessor, i5.RouterLinkDelegate, i3.RouterLink, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"@charset \\\"UTF-8\\\";\\n\\n.container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  height: 50%;\\n  margin-top: 50px; \\n}\\n\\n\\n.titulo[_ngcontent-%COMP%] {\\n  font-size: 2rem; \\n  margin-bottom: 2rem;\\n}\\n\\n\\n.formulario[_ngcontent-%COMP%] {\\n  width: 100%;\\n  max-width: 500px;\\n  margin-bottom: 2rem;\\n  padding: 2rem;\\n  border-radius: 10px;\\n  box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);\\n}\\n\\n\\n.botones[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-top: 4rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbXBhY2llbnRlcy9tZWRpY2FjaW9uL21lZGljYWNpb24ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUFoQiwrQkFBQTtBQUNBO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxnQkFBQSxFQUFBLDRCQUFBO0FBRUo7O0FBQ0UsMkJBQUE7QUFDQTtFQUNFLGVBQUEsRUFBQSxnQ0FBQTtFQUNBLG1CQUFBO0FBRUo7O0FBQ0UsK0JBQUE7QUFDQTtFQUNFLFdBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsMkNBQUE7QUFFSjs7QUFDRSw2QkFBQTtBQUNBO0VBQ0UsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsZ0JBQUE7QUFFSiIsInNvdXJjZXNDb250ZW50IjpbIi8qIEVzdGlsb3MgcGFyYSBlbCBjb250ZW5lZG9yICovXHJcbi5jb250YWluZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBoZWlnaHQ6IDUwJTtcclxuICAgIG1hcmdpbi10b3A6IDUwcHg7IC8qIFN1YmUgZWwgZm9ybXVsYXJpbyA1MHB4ICovXHJcbiAgfVxyXG4gIFxyXG4gIC8qIEVzdGlsb3MgcGFyYSBlbCB0w4PCrXR1bG8gKi9cclxuICAudGl0dWxvIHtcclxuICAgIGZvbnQtc2l6ZTogMnJlbTsgLyogUmVkdWNlIGVsIHRhbWHDg8KxbyBkZWwgdMODwq10dWxvICovXHJcbiAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG4gIH1cclxuICBcclxuICAvKiBFc3RpbG9zIHBhcmEgZWwgZm9ybXVsYXJpbyAqL1xyXG4gIC5mb3JtdWxhcmlvIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgbWF4LXdpZHRoOiA1MDBweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbiAgICBwYWRkaW5nOiAycmVtO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgIGJveC1zaGFkb3c6IDBweCAwcHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIEVzdGlsb3MgcGFyYSBsb3MgYm90b25lcyAqL1xyXG4gIC5ib3RvbmVzIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBtYXJnaW4tdG9wOiA0cmVtO1xyXG4gIH1cclxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","LocalNotifications","MedicacionPage","constructor","fb","auth","router","store","alertcontroller","medicamento","cdias","fecha","hora","userid","nota","id","getId","medicamentoform","group","required","ingresar","uid","getUid","path","getDoc","subscribe","res","info","f","value","invalid","alert","create","header","message","present","newmedicamento","fe","console","log","notification","title","body","schedule","on","year","month","day","hour","minute","second","sound","actions","notifications","createDoc","alert2","navigate","ngOnInit","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\erick\\OneDrive\\Documentos\\GitHub\\Asistente-M-dico-MedMate\\MedMate\\src\\app\\mpacientes\\medicacion\\medicacion.page.ts","C:\\Users\\erick\\OneDrive\\Documentos\\GitHub\\Asistente-M-dico-MedMate\\MedMate\\src\\app\\mpacientes\\medicacion\\medicacion.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup,FormControl,\r\n  Validators, ReactiveFormsModule} from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { time } from 'console';\r\nimport { TimeInterval } from 'rxjs/internal/operators/timeInterval';\r\nimport { medicacion, paciente } from 'src/app/models/interface';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { FirestoreService } from 'src/app/services/firestore.service';\r\nimport { LocalNotifications } from \"@capacitor/local-notifications\";\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-medicacion',\r\n  templateUrl: './medicacion.page.html',\r\n  styleUrls: ['./medicacion.page.scss'],\r\n})\r\nexport class MedicacionPage implements OnInit {\r\n\r\n  public medicamentoform: FormGroup;\r\n\r\n  uid: any;\r\n  info: paciente | undefined;\r\n  newmedicamento: medicacion = {\r\n    medicamento: \"\",\r\n    cdias : 0,\r\n    fecha : \"\",\r\n    hora: 0,\r\n    userid: \"\",\r\n    nota: \"\",\r\n    id: this.store.getId()\r\n\r\n  }\r\n\r\n  constructor(private fb: FormBuilder, private auth: AuthService, private router: Router,\r\n    private store: FirestoreService, private alertcontroller: AlertController) {\r\n\r\n      this.medicamentoform = this.fb.group({\r\n        medicamento: new FormControl(\"\", Validators.required),\r\n        fecha: new FormControl(\"\", Validators.required),\r\n        hora: new FormControl(\"\", Validators.required),\r\n        nota: new FormControl(\"\", Validators.required),\r\n        nota: new FormControl(\"\", Validators.required),\r\n      });\r\n     }\r\n\r\n  async ingresar(){\r\n    const uid = await this.auth.getUid()\r\n    if (uid){\r\n      this.uid = uid;\r\n    }\r\n\r\n    const path = \"Pacientes\"\r\n    this.store.getDoc<paciente>(path,this.uid).subscribe(res => {\r\n      if(res){\r\n        this.info = res;\r\n      }\r\n    })\r\n\r\n    if (this.info?.uid == this.uid) {\r\n      var f = this.medicamentoform.value;\r\n\r\n      if (this.medicamentoform.invalid) {\r\n\r\n      const alert = await this.alertcontroller.create({\r\n        header: 'Datos incompletos',\r\n        message: 'Debe de ingresar todos los campos',\r\n      });\r\n\r\n      await alert.present();\r\n      return;\r\n    }\r\n\r\n    else{\r\n\r\n      this.newmedicamento.medicamento = f.medicamento,\r\n      this.newmedicamento.cdias = f.fe;\r\n      this.newmedicamento.hora = f.hora;\r\n      this.newmedicamento.fecha = f.fecha;\r\n      this.newmedicamento.nota = f.nota;\r\n      this.newmedicamento.userid = this.uid;\r\n      this.newmedicamento.id= this.store.getId()\r\n\r\n      console.log(this.newmedicamento);\r\n\r\n      let notification = {\r\n        id: 1,\r\n        title: \"Recordatorio\",\r\n        body: \"¡Es hora de tomarte la medicina!\" + this.newmedicamento.medicamento,\r\n        schedule: {\r\n          on: {\r\n            year: 2023,\r\n            month: 4,\r\n            day: 7,\r\n            hour: 17,\r\n            minute: 30,\r\n            second: 0\r\n          },\r\n        },\r\n        sound: 'beep.aiff',\r\n        actions: [\r\n          { id: \"yes\", title: \"Sí\" },\r\n          { id: \"no\", title: \"No\" },\r\n        ],\r\n      };\r\n\r\n      LocalNotifications.schedule({\r\n        notifications: [notification],\r\n      });\r\n\r\n      this.store.createDoc(\r\n        this.newmedicamento,\r\n        \"Medicamentos\",\r\n        this.newmedicamento.id\r\n      );     \r\n\r\n      const alert2 = await this.alertcontroller.create({\r\n        header: 'Medicamento agregado',\r\n      });\r\n\r\n      await alert2.present();\r\n      this.router.navigate(['../home'])\r\n\r\n    }\r\n      \r\n    }\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"principal\">\r\n    <ion-title>Medicacion</ion-title>\r\n    <ion-button color=\"blanco\" fill=\"clear\" slot=\"start\" [routerLink]=\"['/home']\"><ion-icon name=\"arrow-back-outline\"></ion-icon>\r\n    </ion-button>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <div class=\"container\">\r\n    <h1 class=\"titulo\">Ingresar Medicamento</h1>\r\n    <form [formGroup]=\"medicamentoform\" (ngSubmit)=\"ingresar()\" class=\"formulario\">\r\n      <ion-item>\r\n        <ion-label position=\"stacked\">Medicamento <ion-text color=\"danger\">*</ion-text></ion-label>\r\n        <ion-input required formControlName=\"medicamento\" type=\"text\"></ion-input>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label position=\"stacked\">Fecha <ion-text color=\"danger\">*</ion-text></ion-label>\r\n        <ion-input required formControlName=\"fecha\" type=\"date\"></ion-input>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label position=\"stacked\">Hora <ion-text color=\"danger\">*</ion-text></ion-label>\r\n        <ion-input required formControlName=\"hora\" type=\"time\"></ion-input>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label position=\"stacked\">Cantidad de dias <ion-text color=\"danger\">*</ion-text></ion-label>\r\n        <ion-input required formControlName=\"cdias\" type=\"number\"></ion-input>\r\n      </ion-item>\r\n      <ion-item counter=\"true\">\r\n        <ion-label position=\"stacked\">Nota <ion-text color=\"danger\">*</ion-text></ion-label>\r\n        <ion-textarea required formControlName=\"nota\" type=\"text\" maxlength=\"120\" inputmode=\"text\"></ion-textarea>\r\n      </ion-item>\r\n      <div class=\"botones\">\r\n        <ion-button color=\"secondary\" expand=\"block\" type=\"submit\">\r\n          Aceptar\r\n        </ion-button>\r\n        <ion-button color=\"light\" expand=\"block\" type=\"reset\">\r\n          Cancelar\r\n        </ion-button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</ion-content>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}