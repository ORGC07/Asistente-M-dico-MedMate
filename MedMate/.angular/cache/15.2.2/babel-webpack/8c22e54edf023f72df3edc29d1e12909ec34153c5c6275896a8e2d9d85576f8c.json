{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/samee/OneDrive/Documentos/GitHub/Asistente-M-dico-MedMate/MedMate/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { _getProvider, getApp, _registerComponent, registerVersion, SDK_VERSION } from '@firebase/app';\nimport { ErrorFactory, FirebaseError, getModularInstance, calculateBackoffMillis, isIndexedDBAvailable, validateIndexedDBOpenable } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport { LogLevel, Logger } from '@firebase/logger';\nimport '@firebase/installations';\nconst name = \"@firebase/remote-config\";\nconst version = \"0.4.4\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * Shims a minimal AbortSignal.\r\n *\r\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\r\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\r\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\r\n * swapped out if/when we do.\r\n */\nclass RemoteConfigAbortSignal {\n  constructor() {\n    this.listeners = [];\n  }\n  addEventListener(listener) {\n    this.listeners.push(listener);\n  }\n  abort() {\n    this.listeners.forEach(listener => listener());\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst RC_COMPONENT_NAME = 'remote-config';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst ERROR_DESCRIPTION_MAP = {\n  [\"registration-window\" /* ErrorCode.REGISTRATION_WINDOW */]: 'Undefined window object. This SDK only supports usage in a browser environment.',\n  [\"registration-project-id\" /* ErrorCode.REGISTRATION_PROJECT_ID */]: 'Undefined project identifier. Check Firebase app initialization.',\n  [\"registration-api-key\" /* ErrorCode.REGISTRATION_API_KEY */]: 'Undefined API key. Check Firebase app initialization.',\n  [\"registration-app-id\" /* ErrorCode.REGISTRATION_APP_ID */]: 'Undefined app identifier. Check Firebase app initialization.',\n  [\"storage-open\" /* ErrorCode.STORAGE_OPEN */]: 'Error thrown when opening storage. Original error: {$originalErrorMessage}.',\n  [\"storage-get\" /* ErrorCode.STORAGE_GET */]: 'Error thrown when reading from storage. Original error: {$originalErrorMessage}.',\n  [\"storage-set\" /* ErrorCode.STORAGE_SET */]: 'Error thrown when writing to storage. Original error: {$originalErrorMessage}.',\n  [\"storage-delete\" /* ErrorCode.STORAGE_DELETE */]: 'Error thrown when deleting from storage. Original error: {$originalErrorMessage}.',\n  [\"fetch-client-network\" /* ErrorCode.FETCH_NETWORK */]: 'Fetch client failed to connect to a network. Check Internet connection.' + ' Original error: {$originalErrorMessage}.',\n  [\"fetch-timeout\" /* ErrorCode.FETCH_TIMEOUT */]: 'The config fetch request timed out. ' + ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.',\n  [\"fetch-throttle\" /* ErrorCode.FETCH_THROTTLE */]: 'The config fetch request timed out while in an exponential backoff state.' + ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.' + ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\n  [\"fetch-client-parse\" /* ErrorCode.FETCH_PARSE */]: 'Fetch client could not parse response.' + ' Original error: {$originalErrorMessage}.',\n  [\"fetch-status\" /* ErrorCode.FETCH_STATUS */]: 'Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.',\n  [\"indexed-db-unavailable\" /* ErrorCode.INDEXED_DB_UNAVAILABLE */]: 'Indexed DB is not supported by current browser'\n};\nconst ERROR_FACTORY = new ErrorFactory('remoteconfig' /* service */, 'Remote Config' /* service name */, ERROR_DESCRIPTION_MAP);\n// Note how this is like typeof/instanceof, but for ErrorCode.\nfunction hasErrorCode(e, errorCode) {\n  return e instanceof FirebaseError && e.code.indexOf(errorCode) !== -1;\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst DEFAULT_VALUE_FOR_BOOLEAN = false;\nconst DEFAULT_VALUE_FOR_STRING = '';\nconst DEFAULT_VALUE_FOR_NUMBER = 0;\nconst BOOLEAN_TRUTHY_VALUES = ['1', 'true', 't', 'yes', 'y', 'on'];\nclass Value {\n  constructor(_source, _value = DEFAULT_VALUE_FOR_STRING) {\n    this._source = _source;\n    this._value = _value;\n  }\n  asString() {\n    return this._value;\n  }\n  asBoolean() {\n    if (this._source === 'static') {\n      return DEFAULT_VALUE_FOR_BOOLEAN;\n    }\n    return BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase()) >= 0;\n  }\n  asNumber() {\n    if (this._source === 'static') {\n      return DEFAULT_VALUE_FOR_NUMBER;\n    }\n    let num = Number(this._value);\n    if (isNaN(num)) {\n      num = DEFAULT_VALUE_FOR_NUMBER;\n    }\n    return num;\n  }\n  getSource() {\n    return this._source;\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\r\n * @returns A {@link RemoteConfig} instance.\r\n *\r\n * @public\r\n */\nfunction getRemoteConfig(app = getApp()) {\n  app = getModularInstance(app);\n  const rcProvider = _getProvider(app, RC_COMPONENT_NAME);\n  return rcProvider.getImmediate();\n}\n/**\r\n * Makes the last fetched config available to the getters.\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @returns A `Promise` which resolves to true if the current call activated the fetched configs.\r\n * If the fetched configs were already activated, the `Promise` will resolve to false.\r\n *\r\n * @public\r\n */\nfunction activate(_x) {\n  return _activate.apply(this, arguments);\n}\n/**\r\n * Ensures the last activated config are available to the getters.\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n *\r\n * @returns A `Promise` that resolves when the last activated config is available to the getters.\r\n * @public\r\n */\nfunction _activate() {\n  _activate = _asyncToGenerator(function* (remoteConfig) {\n    const rc = getModularInstance(remoteConfig);\n    const [lastSuccessfulFetchResponse, activeConfigEtag] = yield Promise.all([rc._storage.getLastSuccessfulFetchResponse(), rc._storage.getActiveConfigEtag()]);\n    if (!lastSuccessfulFetchResponse || !lastSuccessfulFetchResponse.config || !lastSuccessfulFetchResponse.eTag || lastSuccessfulFetchResponse.eTag === activeConfigEtag) {\n      // Either there is no successful fetched config, or is the same as current active\n      // config.\n      return false;\n    }\n    yield Promise.all([rc._storageCache.setActiveConfig(lastSuccessfulFetchResponse.config), rc._storage.setActiveConfigEtag(lastSuccessfulFetchResponse.eTag)]);\n    return true;\n  });\n  return _activate.apply(this, arguments);\n}\nfunction ensureInitialized(remoteConfig) {\n  const rc = getModularInstance(remoteConfig);\n  if (!rc._initializePromise) {\n    rc._initializePromise = rc._storageCache.loadFromStorage().then(() => {\n      rc._isInitializationComplete = true;\n    });\n  }\n  return rc._initializePromise;\n}\n/**\r\n * Fetches and caches configuration from the Remote Config service.\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @public\r\n */\nfunction fetchConfig(_x2) {\n  return _fetchConfig.apply(this, arguments);\n}\n/**\r\n * Gets all config.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @returns All config.\r\n *\r\n * @public\r\n */\nfunction _fetchConfig() {\n  _fetchConfig = _asyncToGenerator(function* (remoteConfig) {\n    const rc = getModularInstance(remoteConfig);\n    // Aborts the request after the given timeout, causing the fetch call to\n    // reject with an `AbortError`.\n    //\n    // <p>Aborting after the request completes is a no-op, so we don't need a\n    // corresponding `clearTimeout`.\n    //\n    // Locating abort logic here because:\n    // * it uses a developer setting (timeout)\n    // * it applies to all retries (like curl's max-time arg)\n    // * it is consistent with the Fetch API's signal input\n    const abortSignal = new RemoteConfigAbortSignal();\n    setTimeout( /*#__PURE__*/_asyncToGenerator(function* () {\n      // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\n      abortSignal.abort();\n    }), rc.settings.fetchTimeoutMillis);\n    // Catches *all* errors thrown by client so status can be set consistently.\n    try {\n      yield rc._client.fetch({\n        cacheMaxAgeMillis: rc.settings.minimumFetchIntervalMillis,\n        signal: abortSignal\n      });\n      yield rc._storageCache.setLastFetchStatus('success');\n    } catch (e) {\n      const lastFetchStatus = hasErrorCode(e, \"fetch-throttle\" /* ErrorCode.FETCH_THROTTLE */) ? 'throttle' : 'failure';\n      yield rc._storageCache.setLastFetchStatus(lastFetchStatus);\n      throw e;\n    }\n  });\n  return _fetchConfig.apply(this, arguments);\n}\nfunction getAll(remoteConfig) {\n  const rc = getModularInstance(remoteConfig);\n  return getAllKeys(rc._storageCache.getActiveConfig(), rc.defaultConfig).reduce((allConfigs, key) => {\n    allConfigs[key] = getValue(remoteConfig, key);\n    return allConfigs;\n  }, {});\n}\n/**\r\n * Gets the value for the given key as a boolean.\r\n *\r\n * Convenience method for calling <code>remoteConfig.getValue(key).asBoolean()</code>.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key as a boolean.\r\n * @public\r\n */\nfunction getBoolean(remoteConfig, key) {\n  return getValue(getModularInstance(remoteConfig), key).asBoolean();\n}\n/**\r\n * Gets the value for the given key as a number.\r\n *\r\n * Convenience method for calling <code>remoteConfig.getValue(key).asNumber()</code>.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key as a number.\r\n *\r\n * @public\r\n */\nfunction getNumber(remoteConfig, key) {\n  return getValue(getModularInstance(remoteConfig), key).asNumber();\n}\n/**\r\n * Gets the value for the given key as a string.\r\n * Convenience method for calling <code>remoteConfig.getValue(key).asString()</code>.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key as a string.\r\n *\r\n * @public\r\n */\nfunction getString(remoteConfig, key) {\n  return getValue(getModularInstance(remoteConfig), key).asString();\n}\n/**\r\n * Gets the {@link Value} for the given key.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key.\r\n *\r\n * @public\r\n */\nfunction getValue(remoteConfig, key) {\n  const rc = getModularInstance(remoteConfig);\n  if (!rc._isInitializationComplete) {\n    rc._logger.debug(`A value was requested for key \"${key}\" before SDK initialization completed.` + ' Await on ensureInitialized if the intent was to get a previously activated value.');\n  }\n  const activeConfig = rc._storageCache.getActiveConfig();\n  if (activeConfig && activeConfig[key] !== undefined) {\n    return new Value('remote', activeConfig[key]);\n  } else if (rc.defaultConfig && rc.defaultConfig[key] !== undefined) {\n    return new Value('default', String(rc.defaultConfig[key]));\n  }\n  rc._logger.debug(`Returning static value for key \"${key}\".` + ' Define a default or remote value if this is unintentional.');\n  return new Value('static');\n}\n/**\r\n * Defines the log level to use.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param logLevel - The log level to set.\r\n *\r\n * @public\r\n */\nfunction setLogLevel(remoteConfig, logLevel) {\n  const rc = getModularInstance(remoteConfig);\n  switch (logLevel) {\n    case 'debug':\n      rc._logger.logLevel = LogLevel.DEBUG;\n      break;\n    case 'silent':\n      rc._logger.logLevel = LogLevel.SILENT;\n      break;\n    default:\n      rc._logger.logLevel = LogLevel.ERROR;\n  }\n}\n/**\r\n * Dedupes and returns an array of all the keys of the received objects.\r\n */\nfunction getAllKeys(obj1 = {}, obj2 = {}) {\n  return Object.keys(Object.assign(Object.assign({}, obj1), obj2));\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * Implements the {@link RemoteConfigClient} abstraction with success response caching.\r\n *\r\n * <p>Comparable to the browser's Cache API for responses, but the Cache API requires a Service\r\n * Worker, which requires HTTPS, which would significantly complicate SDK installation. Also, the\r\n * Cache API doesn't support matching entries by time.\r\n */\nclass CachingClient {\n  constructor(client, storage, storageCache, logger) {\n    this.client = client;\n    this.storage = storage;\n    this.storageCache = storageCache;\n    this.logger = logger;\n  }\n  /**\r\n   * Returns true if the age of the cached fetched configs is less than or equal to\r\n   * {@link Settings#minimumFetchIntervalInSeconds}.\r\n   *\r\n   * <p>This is comparable to passing `headers = { 'Cache-Control': max-age <maxAge> }` to the\r\n   * native Fetch API.\r\n   *\r\n   * <p>Visible for testing.\r\n   */\n  isCachedDataFresh(cacheMaxAgeMillis, lastSuccessfulFetchTimestampMillis) {\n    // Cache can only be fresh if it's populated.\n    if (!lastSuccessfulFetchTimestampMillis) {\n      this.logger.debug('Config fetch cache check. Cache unpopulated.');\n      return false;\n    }\n    // Calculates age of cache entry.\n    const cacheAgeMillis = Date.now() - lastSuccessfulFetchTimestampMillis;\n    const isCachedDataFresh = cacheAgeMillis <= cacheMaxAgeMillis;\n    this.logger.debug('Config fetch cache check.' + ` Cache age millis: ${cacheAgeMillis}.` + ` Cache max age millis (minimumFetchIntervalMillis setting): ${cacheMaxAgeMillis}.` + ` Is cache hit: ${isCachedDataFresh}.`);\n    return isCachedDataFresh;\n  }\n  fetch(request) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // Reads from persisted storage to avoid cache miss if callers don't wait on initialization.\n      const [lastSuccessfulFetchTimestampMillis, lastSuccessfulFetchResponse] = yield Promise.all([_this.storage.getLastSuccessfulFetchTimestampMillis(), _this.storage.getLastSuccessfulFetchResponse()]);\n      // Exits early on cache hit.\n      if (lastSuccessfulFetchResponse && _this.isCachedDataFresh(request.cacheMaxAgeMillis, lastSuccessfulFetchTimestampMillis)) {\n        return lastSuccessfulFetchResponse;\n      }\n      // Deviates from pure decorator by not honoring a passed ETag since we don't have a public API\n      // that allows the caller to pass an ETag.\n      request.eTag = lastSuccessfulFetchResponse && lastSuccessfulFetchResponse.eTag;\n      // Falls back to service on cache miss.\n      const response = yield _this.client.fetch(request);\n      // Fetch throws for non-success responses, so success is guaranteed here.\n      const storageOperations = [\n      // Uses write-through cache for consistency with synchronous public API.\n      _this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];\n      if (response.status === 200) {\n        // Caches response only if it has changed, ie non-304 responses.\n        storageOperations.push(_this.storage.setLastSuccessfulFetchResponse(response));\n      }\n      yield Promise.all(storageOperations);\n      return response;\n    })();\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * Attempts to get the most accurate browser language setting.\r\n *\r\n * <p>Adapted from getUserLanguage in packages/auth/src/utils.js for TypeScript.\r\n *\r\n * <p>Defers default language specification to server logic for consistency.\r\n *\r\n * @param navigatorLanguage Enables tests to override read-only {@link NavigatorLanguage}.\r\n */\nfunction getUserLanguage(navigatorLanguage = navigator) {\n  return (\n    // Most reliable, but only supported in Chrome/Firefox.\n    navigatorLanguage.languages && navigatorLanguage.languages[0] ||\n    // Supported in most browsers, but returns the language of the browser\n    // UI, not the language set in browser settings.\n    navigatorLanguage.language\n    // Polyfill otherwise.\n  );\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * Implements the Client abstraction for the Remote Config REST API.\r\n */\nclass RestClient {\n  constructor(firebaseInstallations, sdkVersion, namespace, projectId, apiKey, appId) {\n    this.firebaseInstallations = firebaseInstallations;\n    this.sdkVersion = sdkVersion;\n    this.namespace = namespace;\n    this.projectId = projectId;\n    this.apiKey = apiKey;\n    this.appId = appId;\n  }\n  /**\r\n   * Fetches from the Remote Config REST API.\r\n   *\r\n   * @throws a {@link ErrorCode.FETCH_NETWORK} error if {@link GlobalFetch#fetch} can't\r\n   * connect to the network.\r\n   * @throws a {@link ErrorCode.FETCH_PARSE} error if {@link Response#json} can't parse the\r\n   * fetch response.\r\n   * @throws a {@link ErrorCode.FETCH_STATUS} error if the service returns an HTTP error status.\r\n   */\n  fetch(request) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const [installationId, installationToken] = yield Promise.all([_this2.firebaseInstallations.getId(), _this2.firebaseInstallations.getToken()]);\n      const urlBase = window.FIREBASE_REMOTE_CONFIG_URL_BASE || 'https://firebaseremoteconfig.googleapis.com';\n      const url = `${urlBase}/v1/projects/${_this2.projectId}/namespaces/${_this2.namespace}:fetch?key=${_this2.apiKey}`;\n      const headers = {\n        'Content-Type': 'application/json',\n        'Content-Encoding': 'gzip',\n        // Deviates from pure decorator by not passing max-age header since we don't currently have\n        // service behavior using that header.\n        'If-None-Match': request.eTag || '*'\n      };\n      const requestBody = {\n        /* eslint-disable camelcase */\n        sdk_version: _this2.sdkVersion,\n        app_instance_id: installationId,\n        app_instance_id_token: installationToken,\n        app_id: _this2.appId,\n        language_code: getUserLanguage()\n        /* eslint-enable camelcase */\n      };\n\n      const options = {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(requestBody)\n      };\n      // This logic isn't REST-specific, but shimming abort logic isn't worth another decorator.\n      const fetchPromise = fetch(url, options);\n      const timeoutPromise = new Promise((_resolve, reject) => {\n        // Maps async event listener to Promise API.\n        request.signal.addEventListener(() => {\n          // Emulates https://heycam.github.io/webidl/#aborterror\n          const error = new Error('The operation was aborted.');\n          error.name = 'AbortError';\n          reject(error);\n        });\n      });\n      let response;\n      try {\n        yield Promise.race([fetchPromise, timeoutPromise]);\n        response = yield fetchPromise;\n      } catch (originalError) {\n        let errorCode = \"fetch-client-network\" /* ErrorCode.FETCH_NETWORK */;\n        if ((originalError === null || originalError === void 0 ? void 0 : originalError.name) === 'AbortError') {\n          errorCode = \"fetch-timeout\" /* ErrorCode.FETCH_TIMEOUT */;\n        }\n\n        throw ERROR_FACTORY.create(errorCode, {\n          originalErrorMessage: originalError === null || originalError === void 0 ? void 0 : originalError.message\n        });\n      }\n      let status = response.status;\n      // Normalizes nullable header to optional.\n      const responseEtag = response.headers.get('ETag') || undefined;\n      let config;\n      let state;\n      // JSON parsing throws SyntaxError if the response body isn't a JSON string.\n      // Requesting application/json and checking for a 200 ensures there's JSON data.\n      if (response.status === 200) {\n        let responseBody;\n        try {\n          responseBody = yield response.json();\n        } catch (originalError) {\n          throw ERROR_FACTORY.create(\"fetch-client-parse\" /* ErrorCode.FETCH_PARSE */, {\n            originalErrorMessage: originalError === null || originalError === void 0 ? void 0 : originalError.message\n          });\n        }\n        config = responseBody['entries'];\n        state = responseBody['state'];\n      }\n      // Normalizes based on legacy state.\n      if (state === 'INSTANCE_STATE_UNSPECIFIED') {\n        status = 500;\n      } else if (state === 'NO_CHANGE') {\n        status = 304;\n      } else if (state === 'NO_TEMPLATE' || state === 'EMPTY_CONFIG') {\n        // These cases can be fixed remotely, so normalize to safe value.\n        config = {};\n      }\n      // Normalize to exception-based control flow for non-success cases.\n      // Encapsulates HTTP specifics in this class as much as possible. Status is still the best for\n      // differentiating success states (200 from 304; the state body param is undefined in a\n      // standard 304).\n      if (status !== 304 && status !== 200) {\n        throw ERROR_FACTORY.create(\"fetch-status\" /* ErrorCode.FETCH_STATUS */, {\n          httpStatus: status\n        });\n      }\n      return {\n        status,\n        eTag: responseEtag,\n        config\n      };\n    })();\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * Supports waiting on a backoff by:\r\n *\r\n * <ul>\r\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\r\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\r\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\r\n *       request appear the same.</li>\r\n * </ul>\r\n *\r\n * <p>Visible for testing.\r\n */\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\n  return new Promise((resolve, reject) => {\n    // Derives backoff from given end time, normalizing negative numbers to zero.\n    const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\n    const timeout = setTimeout(resolve, backoffMillis);\n    // Adds listener, rather than sets onabort, because signal is a shared object.\n    signal.addEventListener(() => {\n      clearTimeout(timeout);\n      // If the request completes before this timeout, the rejection has no effect.\n      reject(ERROR_FACTORY.create(\"fetch-throttle\" /* ErrorCode.FETCH_THROTTLE */, {\n        throttleEndTimeMillis\n      }));\n    });\n  });\n}\n/**\r\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\r\n */\nfunction isRetriableError(e) {\n  if (!(e instanceof FirebaseError) || !e.customData) {\n    return false;\n  }\n  // Uses string index defined by ErrorData, which FirebaseError implements.\n  const httpStatus = Number(e.customData['httpStatus']);\n  return httpStatus === 429 || httpStatus === 500 || httpStatus === 503 || httpStatus === 504;\n}\n/**\r\n * Decorates a Client with retry logic.\r\n *\r\n * <p>Comparable to CachingClient, but uses backoff logic instead of cache max age and doesn't cache\r\n * responses (because the SDK has no use for error responses).\r\n */\nclass RetryingClient {\n  constructor(client, storage) {\n    this.client = client;\n    this.storage = storage;\n  }\n  fetch(request) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const throttleMetadata = (yield _this3.storage.getThrottleMetadata()) || {\n        backoffCount: 0,\n        throttleEndTimeMillis: Date.now()\n      };\n      return _this3.attemptFetch(request, throttleMetadata);\n    })();\n  }\n  /**\r\n   * A recursive helper for attempting a fetch request repeatedly.\r\n   *\r\n   * @throws any non-retriable errors.\r\n   */\n  attemptFetch(request, {\n    throttleEndTimeMillis,\n    backoffCount\n  }) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      // Starts with a (potentially zero) timeout to support resumption from stored state.\n      // Ensures the throttle end time is honored if the last attempt timed out.\n      // Note the SDK will never make a request if the fetch timeout expires at this point.\n      yield setAbortableTimeout(request.signal, throttleEndTimeMillis);\n      try {\n        const response = yield _this4.client.fetch(request);\n        // Note the SDK only clears throttle state if response is success or non-retriable.\n        yield _this4.storage.deleteThrottleMetadata();\n        return response;\n      } catch (e) {\n        if (!isRetriableError(e)) {\n          throw e;\n        }\n        // Increments backoff state.\n        const throttleMetadata = {\n          throttleEndTimeMillis: Date.now() + calculateBackoffMillis(backoffCount),\n          backoffCount: backoffCount + 1\n        };\n        // Persists state.\n        yield _this4.storage.setThrottleMetadata(throttleMetadata);\n        return _this4.attemptFetch(request, throttleMetadata);\n      }\n    })();\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst DEFAULT_FETCH_TIMEOUT_MILLIS = 60 * 1000; // One minute\nconst DEFAULT_CACHE_MAX_AGE_MILLIS = 12 * 60 * 60 * 1000; // Twelve hours.\n/**\r\n * Encapsulates business logic mapping network and storage dependencies to the public SDK API.\r\n *\r\n * See {@link https://github.com/FirebasePrivate/firebase-js-sdk/blob/master/packages/firebase/index.d.ts|interface documentation} for method descriptions.\r\n */\nclass RemoteConfig {\n  constructor(\n  // Required by FirebaseServiceFactory interface.\n  app,\n  // JS doesn't support private yet\n  // (https://github.com/tc39/proposal-class-fields#private-fields), so we hint using an\n  // underscore prefix.\n  /**\r\n   * @internal\r\n   */\n  _client,\n  /**\r\n   * @internal\r\n   */\n  _storageCache,\n  /**\r\n   * @internal\r\n   */\n  _storage,\n  /**\r\n   * @internal\r\n   */\n  _logger) {\n    this.app = app;\n    this._client = _client;\n    this._storageCache = _storageCache;\n    this._storage = _storage;\n    this._logger = _logger;\n    /**\r\n     * Tracks completion of initialization promise.\r\n     * @internal\r\n     */\n    this._isInitializationComplete = false;\n    this.settings = {\n      fetchTimeoutMillis: DEFAULT_FETCH_TIMEOUT_MILLIS,\n      minimumFetchIntervalMillis: DEFAULT_CACHE_MAX_AGE_MILLIS\n    };\n    this.defaultConfig = {};\n  }\n  get fetchTimeMillis() {\n    return this._storageCache.getLastSuccessfulFetchTimestampMillis() || -1;\n  }\n  get lastFetchStatus() {\n    return this._storageCache.getLastFetchStatus() || 'no-fetch-yet';\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * Converts an error event associated with a {@link IDBRequest} to a {@link FirebaseError}.\r\n */\nfunction toFirebaseError(event, errorCode) {\n  const originalError = event.target.error || undefined;\n  return ERROR_FACTORY.create(errorCode, {\n    originalErrorMessage: originalError && (originalError === null || originalError === void 0 ? void 0 : originalError.message)\n  });\n}\n/**\r\n * A general-purpose store keyed by app + namespace + {@link\r\n * ProjectNamespaceKeyFieldValue}.\r\n *\r\n * <p>The Remote Config SDK can be used with multiple app installations, and each app can interact\r\n * with multiple namespaces, so this store uses app (ID + name) and namespace as common parent keys\r\n * for a set of key-value pairs. See {@link Storage#createCompositeKey}.\r\n *\r\n * <p>Visible for testing.\r\n */\nconst APP_NAMESPACE_STORE = 'app_namespace_store';\nconst DB_NAME = 'firebase_remote_config';\nconst DB_VERSION = 1;\n// Visible for testing.\nfunction openDatabase() {\n  return new Promise((resolve, reject) => {\n    try {\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n      request.onerror = event => {\n        reject(toFirebaseError(event, \"storage-open\" /* ErrorCode.STORAGE_OPEN */));\n      };\n\n      request.onsuccess = event => {\n        resolve(event.target.result);\n      };\n      request.onupgradeneeded = event => {\n        const db = event.target.result;\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (event.oldVersion) {\n          case 0:\n            db.createObjectStore(APP_NAMESPACE_STORE, {\n              keyPath: 'compositeKey'\n            });\n        }\n      };\n    } catch (error) {\n      reject(ERROR_FACTORY.create(\"storage-open\" /* ErrorCode.STORAGE_OPEN */, {\n        originalErrorMessage: error === null || error === void 0 ? void 0 : error.message\n      }));\n    }\n  });\n}\n/**\r\n * Abstracts data persistence.\r\n */\nclass Storage {\n  /**\r\n   * @param appId enables storage segmentation by app (ID + name).\r\n   * @param appName enables storage segmentation by app (ID + name).\r\n   * @param namespace enables storage segmentation by namespace.\r\n   */\n  constructor(appId, appName, namespace, openDbPromise = openDatabase()) {\n    this.appId = appId;\n    this.appName = appName;\n    this.namespace = namespace;\n    this.openDbPromise = openDbPromise;\n  }\n  getLastFetchStatus() {\n    return this.get('last_fetch_status');\n  }\n  setLastFetchStatus(status) {\n    return this.set('last_fetch_status', status);\n  }\n  // This is comparable to a cache entry timestamp. If we need to expire other data, we could\n  // consider adding timestamp to all storage records and an optional max age arg to getters.\n  getLastSuccessfulFetchTimestampMillis() {\n    return this.get('last_successful_fetch_timestamp_millis');\n  }\n  setLastSuccessfulFetchTimestampMillis(timestamp) {\n    return this.set('last_successful_fetch_timestamp_millis', timestamp);\n  }\n  getLastSuccessfulFetchResponse() {\n    return this.get('last_successful_fetch_response');\n  }\n  setLastSuccessfulFetchResponse(response) {\n    return this.set('last_successful_fetch_response', response);\n  }\n  getActiveConfig() {\n    return this.get('active_config');\n  }\n  setActiveConfig(config) {\n    return this.set('active_config', config);\n  }\n  getActiveConfigEtag() {\n    return this.get('active_config_etag');\n  }\n  setActiveConfigEtag(etag) {\n    return this.set('active_config_etag', etag);\n  }\n  getThrottleMetadata() {\n    return this.get('throttle_metadata');\n  }\n  setThrottleMetadata(metadata) {\n    return this.set('throttle_metadata', metadata);\n  }\n  deleteThrottleMetadata() {\n    return this.delete('throttle_metadata');\n  }\n  get(key) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const db = yield _this5.openDbPromise;\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction([APP_NAMESPACE_STORE], 'readonly');\n        const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\n        const compositeKey = _this5.createCompositeKey(key);\n        try {\n          const request = objectStore.get(compositeKey);\n          request.onerror = event => {\n            reject(toFirebaseError(event, \"storage-get\" /* ErrorCode.STORAGE_GET */));\n          };\n\n          request.onsuccess = event => {\n            const result = event.target.result;\n            if (result) {\n              resolve(result.value);\n            } else {\n              resolve(undefined);\n            }\n          };\n        } catch (e) {\n          reject(ERROR_FACTORY.create(\"storage-get\" /* ErrorCode.STORAGE_GET */, {\n            originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\n          }));\n        }\n      });\n    })();\n  }\n  set(key, value) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      const db = yield _this6.openDbPromise;\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\n        const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\n        const compositeKey = _this6.createCompositeKey(key);\n        try {\n          const request = objectStore.put({\n            compositeKey,\n            value\n          });\n          request.onerror = event => {\n            reject(toFirebaseError(event, \"storage-set\" /* ErrorCode.STORAGE_SET */));\n          };\n\n          request.onsuccess = () => {\n            resolve();\n          };\n        } catch (e) {\n          reject(ERROR_FACTORY.create(\"storage-set\" /* ErrorCode.STORAGE_SET */, {\n            originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\n          }));\n        }\n      });\n    })();\n  }\n  delete(key) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      const db = yield _this7.openDbPromise;\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\n        const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\n        const compositeKey = _this7.createCompositeKey(key);\n        try {\n          const request = objectStore.delete(compositeKey);\n          request.onerror = event => {\n            reject(toFirebaseError(event, \"storage-delete\" /* ErrorCode.STORAGE_DELETE */));\n          };\n\n          request.onsuccess = () => {\n            resolve();\n          };\n        } catch (e) {\n          reject(ERROR_FACTORY.create(\"storage-delete\" /* ErrorCode.STORAGE_DELETE */, {\n            originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\n          }));\n        }\n      });\n    })();\n  }\n  // Facilitates composite key functionality (which is unsupported in IE).\n  createCompositeKey(key) {\n    return [this.appId, this.appName, this.namespace, key].join();\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n/**\r\n * A memory cache layer over storage to support the SDK's synchronous read requirements.\r\n */\nclass StorageCache {\n  constructor(storage) {\n    this.storage = storage;\n  }\n  /**\r\n   * Memory-only getters\r\n   */\n  getLastFetchStatus() {\n    return this.lastFetchStatus;\n  }\n  getLastSuccessfulFetchTimestampMillis() {\n    return this.lastSuccessfulFetchTimestampMillis;\n  }\n  getActiveConfig() {\n    return this.activeConfig;\n  }\n  /**\r\n   * Read-ahead getter\r\n   */\n  loadFromStorage() {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      const lastFetchStatusPromise = _this8.storage.getLastFetchStatus();\n      const lastSuccessfulFetchTimestampMillisPromise = _this8.storage.getLastSuccessfulFetchTimestampMillis();\n      const activeConfigPromise = _this8.storage.getActiveConfig();\n      // Note:\n      // 1. we consistently check for undefined to avoid clobbering defined values\n      //   in memory\n      // 2. we defer awaiting to improve readability, as opposed to destructuring\n      //   a Promise.all result, for example\n      const lastFetchStatus = yield lastFetchStatusPromise;\n      if (lastFetchStatus) {\n        _this8.lastFetchStatus = lastFetchStatus;\n      }\n      const lastSuccessfulFetchTimestampMillis = yield lastSuccessfulFetchTimestampMillisPromise;\n      if (lastSuccessfulFetchTimestampMillis) {\n        _this8.lastSuccessfulFetchTimestampMillis = lastSuccessfulFetchTimestampMillis;\n      }\n      const activeConfig = yield activeConfigPromise;\n      if (activeConfig) {\n        _this8.activeConfig = activeConfig;\n      }\n    })();\n  }\n  /**\r\n   * Write-through setters\r\n   */\n  setLastFetchStatus(status) {\n    this.lastFetchStatus = status;\n    return this.storage.setLastFetchStatus(status);\n  }\n  setLastSuccessfulFetchTimestampMillis(timestampMillis) {\n    this.lastSuccessfulFetchTimestampMillis = timestampMillis;\n    return this.storage.setLastSuccessfulFetchTimestampMillis(timestampMillis);\n  }\n  setActiveConfig(activeConfig) {\n    this.activeConfig = activeConfig;\n    return this.storage.setActiveConfig(activeConfig);\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nfunction registerRemoteConfig() {\n  _registerComponent(new Component(RC_COMPONENT_NAME, remoteConfigFactory, \"PUBLIC\" /* ComponentType.PUBLIC */).setMultipleInstances(true));\n  registerVersion(name, version);\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, 'esm2017');\n  function remoteConfigFactory(container, {\n    instanceIdentifier: namespace\n  }) {\n    /* Dependencies */\n    // getImmediate for FirebaseApp will always succeed\n    const app = container.getProvider('app').getImmediate();\n    // The following call will always succeed because rc has `import '@firebase/installations'`\n    const installations = container.getProvider('installations-internal').getImmediate();\n    // Guards against the SDK being used in non-browser environments.\n    if (typeof window === 'undefined') {\n      throw ERROR_FACTORY.create(\"registration-window\" /* ErrorCode.REGISTRATION_WINDOW */);\n    }\n    // Guards against the SDK being used when indexedDB is not available.\n    if (!isIndexedDBAvailable()) {\n      throw ERROR_FACTORY.create(\"indexed-db-unavailable\" /* ErrorCode.INDEXED_DB_UNAVAILABLE */);\n    }\n    // Normalizes optional inputs.\n    const {\n      projectId,\n      apiKey,\n      appId\n    } = app.options;\n    if (!projectId) {\n      throw ERROR_FACTORY.create(\"registration-project-id\" /* ErrorCode.REGISTRATION_PROJECT_ID */);\n    }\n\n    if (!apiKey) {\n      throw ERROR_FACTORY.create(\"registration-api-key\" /* ErrorCode.REGISTRATION_API_KEY */);\n    }\n\n    if (!appId) {\n      throw ERROR_FACTORY.create(\"registration-app-id\" /* ErrorCode.REGISTRATION_APP_ID */);\n    }\n\n    namespace = namespace || 'firebase';\n    const storage = new Storage(appId, app.name, namespace);\n    const storageCache = new StorageCache(storage);\n    const logger = new Logger(name);\n    // Sets ERROR as the default log level.\n    // See RemoteConfig#setLogLevel for corresponding normalization to ERROR log level.\n    logger.logLevel = LogLevel.ERROR;\n    const restClient = new RestClient(installations,\n    // Uses the JS SDK version, by which the RC package version can be deduced, if necessary.\n    SDK_VERSION, namespace, projectId, apiKey, appId);\n    const retryingClient = new RetryingClient(restClient, storage);\n    const cachingClient = new CachingClient(retryingClient, storage, storageCache, logger);\n    const remoteConfigInstance = new RemoteConfig(app, cachingClient, storageCache, storage, logger);\n    // Starts warming cache.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    ensureInitialized(remoteConfigInstance);\n    return remoteConfigInstance;\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// This API is put in a separate file, so we can stub fetchConfig and activate in tests.\n// It's not possible to stub standalone functions from the same module.\n/**\r\n *\r\n * Performs fetch and activate operations, as a convenience.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n *\r\n * @returns A `Promise` which resolves to true if the current call activated the fetched configs.\r\n * If the fetched configs were already activated, the `Promise` will resolve to false.\r\n *\r\n * @public\r\n */\nfunction fetchAndActivate(_x3) {\n  return _fetchAndActivate.apply(this, arguments);\n}\n/**\r\n * This method provides two different checks:\r\n *\r\n * 1. Check if IndexedDB exists in the browser environment.\r\n * 2. Check if the current browser context allows IndexedDB `open()` calls.\r\n *\r\n * @returns A `Promise` which resolves to true if a {@link RemoteConfig} instance\r\n * can be initialized in this environment, or false if it cannot.\r\n * @public\r\n */\nfunction _fetchAndActivate() {\n  _fetchAndActivate = _asyncToGenerator(function* (remoteConfig) {\n    remoteConfig = getModularInstance(remoteConfig);\n    yield fetchConfig(remoteConfig);\n    return activate(remoteConfig);\n  });\n  return _fetchAndActivate.apply(this, arguments);\n}\nfunction isSupported() {\n  return _isSupported.apply(this, arguments);\n}\n/**\r\n * Firebase Remote Config\r\n *\r\n * @packageDocumentation\r\n */\n/** register component and version */\nfunction _isSupported() {\n  _isSupported = _asyncToGenerator(function* () {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    }\n    try {\n      const isDBOpenable = yield validateIndexedDBOpenable();\n      return isDBOpenable;\n    } catch (error) {\n      return false;\n    }\n  });\n  return _isSupported.apply(this, arguments);\n}\nregisterRemoteConfig();\nexport { activate, ensureInitialized, fetchAndActivate, fetchConfig, getAll, getBoolean, getNumber, getRemoteConfig, getString, getValue, isSupported, setLogLevel };","map":{"version":3,"names":["_getProvider","getApp","_registerComponent","registerVersion","SDK_VERSION","ErrorFactory","FirebaseError","getModularInstance","calculateBackoffMillis","isIndexedDBAvailable","validateIndexedDBOpenable","Component","LogLevel","Logger","name","version","RemoteConfigAbortSignal","constructor","listeners","addEventListener","listener","push","abort","forEach","RC_COMPONENT_NAME","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","hasErrorCode","e","errorCode","code","indexOf","DEFAULT_VALUE_FOR_BOOLEAN","DEFAULT_VALUE_FOR_STRING","DEFAULT_VALUE_FOR_NUMBER","BOOLEAN_TRUTHY_VALUES","Value","_source","_value","asString","asBoolean","toLowerCase","asNumber","num","Number","isNaN","getSource","getRemoteConfig","app","rcProvider","getImmediate","activate","remoteConfig","rc","lastSuccessfulFetchResponse","activeConfigEtag","Promise","all","_storage","getLastSuccessfulFetchResponse","getActiveConfigEtag","config","eTag","_storageCache","setActiveConfig","setActiveConfigEtag","ensureInitialized","_initializePromise","loadFromStorage","then","_isInitializationComplete","fetchConfig","abortSignal","setTimeout","settings","fetchTimeoutMillis","_client","fetch","cacheMaxAgeMillis","minimumFetchIntervalMillis","signal","setLastFetchStatus","lastFetchStatus","getAll","getAllKeys","getActiveConfig","defaultConfig","reduce","allConfigs","key","getValue","getBoolean","getNumber","getString","_logger","debug","activeConfig","undefined","String","setLogLevel","logLevel","DEBUG","SILENT","ERROR","obj1","obj2","Object","keys","assign","CachingClient","client","storage","storageCache","logger","isCachedDataFresh","lastSuccessfulFetchTimestampMillis","cacheAgeMillis","Date","now","request","getLastSuccessfulFetchTimestampMillis","response","storageOperations","setLastSuccessfulFetchTimestampMillis","status","setLastSuccessfulFetchResponse","getUserLanguage","navigatorLanguage","navigator","languages","language","RestClient","firebaseInstallations","sdkVersion","namespace","projectId","apiKey","appId","installationId","installationToken","getId","getToken","urlBase","window","FIREBASE_REMOTE_CONFIG_URL_BASE","url","headers","requestBody","sdk_version","app_instance_id","app_instance_id_token","app_id","language_code","options","method","body","JSON","stringify","fetchPromise","timeoutPromise","_resolve","reject","error","Error","race","originalError","create","originalErrorMessage","message","responseEtag","get","state","responseBody","json","httpStatus","setAbortableTimeout","throttleEndTimeMillis","resolve","backoffMillis","Math","max","timeout","clearTimeout","isRetriableError","customData","RetryingClient","throttleMetadata","getThrottleMetadata","backoffCount","attemptFetch","deleteThrottleMetadata","setThrottleMetadata","DEFAULT_FETCH_TIMEOUT_MILLIS","DEFAULT_CACHE_MAX_AGE_MILLIS","RemoteConfig","fetchTimeMillis","getLastFetchStatus","toFirebaseError","event","target","APP_NAMESPACE_STORE","DB_NAME","DB_VERSION","openDatabase","indexedDB","open","onerror","onsuccess","result","onupgradeneeded","db","oldVersion","createObjectStore","keyPath","Storage","appName","openDbPromise","set","timestamp","etag","metadata","delete","transaction","objectStore","compositeKey","createCompositeKey","value","put","join","StorageCache","lastFetchStatusPromise","lastSuccessfulFetchTimestampMillisPromise","activeConfigPromise","timestampMillis","registerRemoteConfig","remoteConfigFactory","setMultipleInstances","container","instanceIdentifier","getProvider","installations","restClient","retryingClient","cachingClient","remoteConfigInstance","fetchAndActivate","isSupported","isDBOpenable"],"sources":["C:/Users/samee/OneDrive/Documentos/GitHub/Asistente-M-dico-MedMate/MedMate/node_modules/@firebase/remote-config/dist/esm/index.esm2017.js"],"sourcesContent":["import { _getProvider, getApp, _registerComponent, registerVersion, SDK_VERSION } from '@firebase/app';\nimport { ErrorFactory, FirebaseError, getModularInstance, calculateBackoffMillis, isIndexedDBAvailable, validateIndexedDBOpenable } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport { LogLevel, Logger } from '@firebase/logger';\nimport '@firebase/installations';\n\nconst name = \"@firebase/remote-config\";\nconst version = \"0.4.4\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Shims a minimal AbortSignal.\r\n *\r\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\r\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\r\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\r\n * swapped out if/when we do.\r\n */\r\nclass RemoteConfigAbortSignal {\r\n    constructor() {\r\n        this.listeners = [];\r\n    }\r\n    addEventListener(listener) {\r\n        this.listeners.push(listener);\r\n    }\r\n    abort() {\r\n        this.listeners.forEach(listener => listener());\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst RC_COMPONENT_NAME = 'remote-config';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERROR_DESCRIPTION_MAP = {\r\n    [\"registration-window\" /* ErrorCode.REGISTRATION_WINDOW */]: 'Undefined window object. This SDK only supports usage in a browser environment.',\r\n    [\"registration-project-id\" /* ErrorCode.REGISTRATION_PROJECT_ID */]: 'Undefined project identifier. Check Firebase app initialization.',\r\n    [\"registration-api-key\" /* ErrorCode.REGISTRATION_API_KEY */]: 'Undefined API key. Check Firebase app initialization.',\r\n    [\"registration-app-id\" /* ErrorCode.REGISTRATION_APP_ID */]: 'Undefined app identifier. Check Firebase app initialization.',\r\n    [\"storage-open\" /* ErrorCode.STORAGE_OPEN */]: 'Error thrown when opening storage. Original error: {$originalErrorMessage}.',\r\n    [\"storage-get\" /* ErrorCode.STORAGE_GET */]: 'Error thrown when reading from storage. Original error: {$originalErrorMessage}.',\r\n    [\"storage-set\" /* ErrorCode.STORAGE_SET */]: 'Error thrown when writing to storage. Original error: {$originalErrorMessage}.',\r\n    [\"storage-delete\" /* ErrorCode.STORAGE_DELETE */]: 'Error thrown when deleting from storage. Original error: {$originalErrorMessage}.',\r\n    [\"fetch-client-network\" /* ErrorCode.FETCH_NETWORK */]: 'Fetch client failed to connect to a network. Check Internet connection.' +\r\n        ' Original error: {$originalErrorMessage}.',\r\n    [\"fetch-timeout\" /* ErrorCode.FETCH_TIMEOUT */]: 'The config fetch request timed out. ' +\r\n        ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.',\r\n    [\"fetch-throttle\" /* ErrorCode.FETCH_THROTTLE */]: 'The config fetch request timed out while in an exponential backoff state.' +\r\n        ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.' +\r\n        ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\r\n    [\"fetch-client-parse\" /* ErrorCode.FETCH_PARSE */]: 'Fetch client could not parse response.' +\r\n        ' Original error: {$originalErrorMessage}.',\r\n    [\"fetch-status\" /* ErrorCode.FETCH_STATUS */]: 'Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.',\r\n    [\"indexed-db-unavailable\" /* ErrorCode.INDEXED_DB_UNAVAILABLE */]: 'Indexed DB is not supported by current browser'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('remoteconfig' /* service */, 'Remote Config' /* service name */, ERROR_DESCRIPTION_MAP);\r\n// Note how this is like typeof/instanceof, but for ErrorCode.\r\nfunction hasErrorCode(e, errorCode) {\r\n    return e instanceof FirebaseError && e.code.indexOf(errorCode) !== -1;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DEFAULT_VALUE_FOR_BOOLEAN = false;\r\nconst DEFAULT_VALUE_FOR_STRING = '';\r\nconst DEFAULT_VALUE_FOR_NUMBER = 0;\r\nconst BOOLEAN_TRUTHY_VALUES = ['1', 'true', 't', 'yes', 'y', 'on'];\r\nclass Value {\r\n    constructor(_source, _value = DEFAULT_VALUE_FOR_STRING) {\r\n        this._source = _source;\r\n        this._value = _value;\r\n    }\r\n    asString() {\r\n        return this._value;\r\n    }\r\n    asBoolean() {\r\n        if (this._source === 'static') {\r\n            return DEFAULT_VALUE_FOR_BOOLEAN;\r\n        }\r\n        return BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase()) >= 0;\r\n    }\r\n    asNumber() {\r\n        if (this._source === 'static') {\r\n            return DEFAULT_VALUE_FOR_NUMBER;\r\n        }\r\n        let num = Number(this._value);\r\n        if (isNaN(num)) {\r\n            num = DEFAULT_VALUE_FOR_NUMBER;\r\n        }\r\n        return num;\r\n    }\r\n    getSource() {\r\n        return this._source;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\r\n * @returns A {@link RemoteConfig} instance.\r\n *\r\n * @public\r\n */\r\nfunction getRemoteConfig(app = getApp()) {\r\n    app = getModularInstance(app);\r\n    const rcProvider = _getProvider(app, RC_COMPONENT_NAME);\r\n    return rcProvider.getImmediate();\r\n}\r\n/**\r\n * Makes the last fetched config available to the getters.\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @returns A `Promise` which resolves to true if the current call activated the fetched configs.\r\n * If the fetched configs were already activated, the `Promise` will resolve to false.\r\n *\r\n * @public\r\n */\r\nasync function activate(remoteConfig) {\r\n    const rc = getModularInstance(remoteConfig);\r\n    const [lastSuccessfulFetchResponse, activeConfigEtag] = await Promise.all([\r\n        rc._storage.getLastSuccessfulFetchResponse(),\r\n        rc._storage.getActiveConfigEtag()\r\n    ]);\r\n    if (!lastSuccessfulFetchResponse ||\r\n        !lastSuccessfulFetchResponse.config ||\r\n        !lastSuccessfulFetchResponse.eTag ||\r\n        lastSuccessfulFetchResponse.eTag === activeConfigEtag) {\r\n        // Either there is no successful fetched config, or is the same as current active\r\n        // config.\r\n        return false;\r\n    }\r\n    await Promise.all([\r\n        rc._storageCache.setActiveConfig(lastSuccessfulFetchResponse.config),\r\n        rc._storage.setActiveConfigEtag(lastSuccessfulFetchResponse.eTag)\r\n    ]);\r\n    return true;\r\n}\r\n/**\r\n * Ensures the last activated config are available to the getters.\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n *\r\n * @returns A `Promise` that resolves when the last activated config is available to the getters.\r\n * @public\r\n */\r\nfunction ensureInitialized(remoteConfig) {\r\n    const rc = getModularInstance(remoteConfig);\r\n    if (!rc._initializePromise) {\r\n        rc._initializePromise = rc._storageCache.loadFromStorage().then(() => {\r\n            rc._isInitializationComplete = true;\r\n        });\r\n    }\r\n    return rc._initializePromise;\r\n}\r\n/**\r\n * Fetches and caches configuration from the Remote Config service.\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @public\r\n */\r\nasync function fetchConfig(remoteConfig) {\r\n    const rc = getModularInstance(remoteConfig);\r\n    // Aborts the request after the given timeout, causing the fetch call to\r\n    // reject with an `AbortError`.\r\n    //\r\n    // <p>Aborting after the request completes is a no-op, so we don't need a\r\n    // corresponding `clearTimeout`.\r\n    //\r\n    // Locating abort logic here because:\r\n    // * it uses a developer setting (timeout)\r\n    // * it applies to all retries (like curl's max-time arg)\r\n    // * it is consistent with the Fetch API's signal input\r\n    const abortSignal = new RemoteConfigAbortSignal();\r\n    setTimeout(async () => {\r\n        // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\r\n        abortSignal.abort();\r\n    }, rc.settings.fetchTimeoutMillis);\r\n    // Catches *all* errors thrown by client so status can be set consistently.\r\n    try {\r\n        await rc._client.fetch({\r\n            cacheMaxAgeMillis: rc.settings.minimumFetchIntervalMillis,\r\n            signal: abortSignal\r\n        });\r\n        await rc._storageCache.setLastFetchStatus('success');\r\n    }\r\n    catch (e) {\r\n        const lastFetchStatus = hasErrorCode(e, \"fetch-throttle\" /* ErrorCode.FETCH_THROTTLE */)\r\n            ? 'throttle'\r\n            : 'failure';\r\n        await rc._storageCache.setLastFetchStatus(lastFetchStatus);\r\n        throw e;\r\n    }\r\n}\r\n/**\r\n * Gets all config.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @returns All config.\r\n *\r\n * @public\r\n */\r\nfunction getAll(remoteConfig) {\r\n    const rc = getModularInstance(remoteConfig);\r\n    return getAllKeys(rc._storageCache.getActiveConfig(), rc.defaultConfig).reduce((allConfigs, key) => {\r\n        allConfigs[key] = getValue(remoteConfig, key);\r\n        return allConfigs;\r\n    }, {});\r\n}\r\n/**\r\n * Gets the value for the given key as a boolean.\r\n *\r\n * Convenience method for calling <code>remoteConfig.getValue(key).asBoolean()</code>.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key as a boolean.\r\n * @public\r\n */\r\nfunction getBoolean(remoteConfig, key) {\r\n    return getValue(getModularInstance(remoteConfig), key).asBoolean();\r\n}\r\n/**\r\n * Gets the value for the given key as a number.\r\n *\r\n * Convenience method for calling <code>remoteConfig.getValue(key).asNumber()</code>.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key as a number.\r\n *\r\n * @public\r\n */\r\nfunction getNumber(remoteConfig, key) {\r\n    return getValue(getModularInstance(remoteConfig), key).asNumber();\r\n}\r\n/**\r\n * Gets the value for the given key as a string.\r\n * Convenience method for calling <code>remoteConfig.getValue(key).asString()</code>.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key as a string.\r\n *\r\n * @public\r\n */\r\nfunction getString(remoteConfig, key) {\r\n    return getValue(getModularInstance(remoteConfig), key).asString();\r\n}\r\n/**\r\n * Gets the {@link Value} for the given key.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param key - The name of the parameter.\r\n *\r\n * @returns The value for the given key.\r\n *\r\n * @public\r\n */\r\nfunction getValue(remoteConfig, key) {\r\n    const rc = getModularInstance(remoteConfig);\r\n    if (!rc._isInitializationComplete) {\r\n        rc._logger.debug(`A value was requested for key \"${key}\" before SDK initialization completed.` +\r\n            ' Await on ensureInitialized if the intent was to get a previously activated value.');\r\n    }\r\n    const activeConfig = rc._storageCache.getActiveConfig();\r\n    if (activeConfig && activeConfig[key] !== undefined) {\r\n        return new Value('remote', activeConfig[key]);\r\n    }\r\n    else if (rc.defaultConfig && rc.defaultConfig[key] !== undefined) {\r\n        return new Value('default', String(rc.defaultConfig[key]));\r\n    }\r\n    rc._logger.debug(`Returning static value for key \"${key}\".` +\r\n        ' Define a default or remote value if this is unintentional.');\r\n    return new Value('static');\r\n}\r\n/**\r\n * Defines the log level to use.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n * @param logLevel - The log level to set.\r\n *\r\n * @public\r\n */\r\nfunction setLogLevel(remoteConfig, logLevel) {\r\n    const rc = getModularInstance(remoteConfig);\r\n    switch (logLevel) {\r\n        case 'debug':\r\n            rc._logger.logLevel = LogLevel.DEBUG;\r\n            break;\r\n        case 'silent':\r\n            rc._logger.logLevel = LogLevel.SILENT;\r\n            break;\r\n        default:\r\n            rc._logger.logLevel = LogLevel.ERROR;\r\n    }\r\n}\r\n/**\r\n * Dedupes and returns an array of all the keys of the received objects.\r\n */\r\nfunction getAllKeys(obj1 = {}, obj2 = {}) {\r\n    return Object.keys(Object.assign(Object.assign({}, obj1), obj2));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Implements the {@link RemoteConfigClient} abstraction with success response caching.\r\n *\r\n * <p>Comparable to the browser's Cache API for responses, but the Cache API requires a Service\r\n * Worker, which requires HTTPS, which would significantly complicate SDK installation. Also, the\r\n * Cache API doesn't support matching entries by time.\r\n */\r\nclass CachingClient {\r\n    constructor(client, storage, storageCache, logger) {\r\n        this.client = client;\r\n        this.storage = storage;\r\n        this.storageCache = storageCache;\r\n        this.logger = logger;\r\n    }\r\n    /**\r\n     * Returns true if the age of the cached fetched configs is less than or equal to\r\n     * {@link Settings#minimumFetchIntervalInSeconds}.\r\n     *\r\n     * <p>This is comparable to passing `headers = { 'Cache-Control': max-age <maxAge> }` to the\r\n     * native Fetch API.\r\n     *\r\n     * <p>Visible for testing.\r\n     */\r\n    isCachedDataFresh(cacheMaxAgeMillis, lastSuccessfulFetchTimestampMillis) {\r\n        // Cache can only be fresh if it's populated.\r\n        if (!lastSuccessfulFetchTimestampMillis) {\r\n            this.logger.debug('Config fetch cache check. Cache unpopulated.');\r\n            return false;\r\n        }\r\n        // Calculates age of cache entry.\r\n        const cacheAgeMillis = Date.now() - lastSuccessfulFetchTimestampMillis;\r\n        const isCachedDataFresh = cacheAgeMillis <= cacheMaxAgeMillis;\r\n        this.logger.debug('Config fetch cache check.' +\r\n            ` Cache age millis: ${cacheAgeMillis}.` +\r\n            ` Cache max age millis (minimumFetchIntervalMillis setting): ${cacheMaxAgeMillis}.` +\r\n            ` Is cache hit: ${isCachedDataFresh}.`);\r\n        return isCachedDataFresh;\r\n    }\r\n    async fetch(request) {\r\n        // Reads from persisted storage to avoid cache miss if callers don't wait on initialization.\r\n        const [lastSuccessfulFetchTimestampMillis, lastSuccessfulFetchResponse] = await Promise.all([\r\n            this.storage.getLastSuccessfulFetchTimestampMillis(),\r\n            this.storage.getLastSuccessfulFetchResponse()\r\n        ]);\r\n        // Exits early on cache hit.\r\n        if (lastSuccessfulFetchResponse &&\r\n            this.isCachedDataFresh(request.cacheMaxAgeMillis, lastSuccessfulFetchTimestampMillis)) {\r\n            return lastSuccessfulFetchResponse;\r\n        }\r\n        // Deviates from pure decorator by not honoring a passed ETag since we don't have a public API\r\n        // that allows the caller to pass an ETag.\r\n        request.eTag =\r\n            lastSuccessfulFetchResponse && lastSuccessfulFetchResponse.eTag;\r\n        // Falls back to service on cache miss.\r\n        const response = await this.client.fetch(request);\r\n        // Fetch throws for non-success responses, so success is guaranteed here.\r\n        const storageOperations = [\r\n            // Uses write-through cache for consistency with synchronous public API.\r\n            this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())\r\n        ];\r\n        if (response.status === 200) {\r\n            // Caches response only if it has changed, ie non-304 responses.\r\n            storageOperations.push(this.storage.setLastSuccessfulFetchResponse(response));\r\n        }\r\n        await Promise.all(storageOperations);\r\n        return response;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Attempts to get the most accurate browser language setting.\r\n *\r\n * <p>Adapted from getUserLanguage in packages/auth/src/utils.js for TypeScript.\r\n *\r\n * <p>Defers default language specification to server logic for consistency.\r\n *\r\n * @param navigatorLanguage Enables tests to override read-only {@link NavigatorLanguage}.\r\n */\r\nfunction getUserLanguage(navigatorLanguage = navigator) {\r\n    return (\r\n    // Most reliable, but only supported in Chrome/Firefox.\r\n    (navigatorLanguage.languages && navigatorLanguage.languages[0]) ||\r\n        // Supported in most browsers, but returns the language of the browser\r\n        // UI, not the language set in browser settings.\r\n        navigatorLanguage.language\r\n    // Polyfill otherwise.\r\n    );\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Implements the Client abstraction for the Remote Config REST API.\r\n */\r\nclass RestClient {\r\n    constructor(firebaseInstallations, sdkVersion, namespace, projectId, apiKey, appId) {\r\n        this.firebaseInstallations = firebaseInstallations;\r\n        this.sdkVersion = sdkVersion;\r\n        this.namespace = namespace;\r\n        this.projectId = projectId;\r\n        this.apiKey = apiKey;\r\n        this.appId = appId;\r\n    }\r\n    /**\r\n     * Fetches from the Remote Config REST API.\r\n     *\r\n     * @throws a {@link ErrorCode.FETCH_NETWORK} error if {@link GlobalFetch#fetch} can't\r\n     * connect to the network.\r\n     * @throws a {@link ErrorCode.FETCH_PARSE} error if {@link Response#json} can't parse the\r\n     * fetch response.\r\n     * @throws a {@link ErrorCode.FETCH_STATUS} error if the service returns an HTTP error status.\r\n     */\r\n    async fetch(request) {\r\n        const [installationId, installationToken] = await Promise.all([\r\n            this.firebaseInstallations.getId(),\r\n            this.firebaseInstallations.getToken()\r\n        ]);\r\n        const urlBase = window.FIREBASE_REMOTE_CONFIG_URL_BASE ||\r\n            'https://firebaseremoteconfig.googleapis.com';\r\n        const url = `${urlBase}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`;\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Content-Encoding': 'gzip',\r\n            // Deviates from pure decorator by not passing max-age header since we don't currently have\r\n            // service behavior using that header.\r\n            'If-None-Match': request.eTag || '*'\r\n        };\r\n        const requestBody = {\r\n            /* eslint-disable camelcase */\r\n            sdk_version: this.sdkVersion,\r\n            app_instance_id: installationId,\r\n            app_instance_id_token: installationToken,\r\n            app_id: this.appId,\r\n            language_code: getUserLanguage()\r\n            /* eslint-enable camelcase */\r\n        };\r\n        const options = {\r\n            method: 'POST',\r\n            headers,\r\n            body: JSON.stringify(requestBody)\r\n        };\r\n        // This logic isn't REST-specific, but shimming abort logic isn't worth another decorator.\r\n        const fetchPromise = fetch(url, options);\r\n        const timeoutPromise = new Promise((_resolve, reject) => {\r\n            // Maps async event listener to Promise API.\r\n            request.signal.addEventListener(() => {\r\n                // Emulates https://heycam.github.io/webidl/#aborterror\r\n                const error = new Error('The operation was aborted.');\r\n                error.name = 'AbortError';\r\n                reject(error);\r\n            });\r\n        });\r\n        let response;\r\n        try {\r\n            await Promise.race([fetchPromise, timeoutPromise]);\r\n            response = await fetchPromise;\r\n        }\r\n        catch (originalError) {\r\n            let errorCode = \"fetch-client-network\" /* ErrorCode.FETCH_NETWORK */;\r\n            if ((originalError === null || originalError === void 0 ? void 0 : originalError.name) === 'AbortError') {\r\n                errorCode = \"fetch-timeout\" /* ErrorCode.FETCH_TIMEOUT */;\r\n            }\r\n            throw ERROR_FACTORY.create(errorCode, {\r\n                originalErrorMessage: originalError === null || originalError === void 0 ? void 0 : originalError.message\r\n            });\r\n        }\r\n        let status = response.status;\r\n        // Normalizes nullable header to optional.\r\n        const responseEtag = response.headers.get('ETag') || undefined;\r\n        let config;\r\n        let state;\r\n        // JSON parsing throws SyntaxError if the response body isn't a JSON string.\r\n        // Requesting application/json and checking for a 200 ensures there's JSON data.\r\n        if (response.status === 200) {\r\n            let responseBody;\r\n            try {\r\n                responseBody = await response.json();\r\n            }\r\n            catch (originalError) {\r\n                throw ERROR_FACTORY.create(\"fetch-client-parse\" /* ErrorCode.FETCH_PARSE */, {\r\n                    originalErrorMessage: originalError === null || originalError === void 0 ? void 0 : originalError.message\r\n                });\r\n            }\r\n            config = responseBody['entries'];\r\n            state = responseBody['state'];\r\n        }\r\n        // Normalizes based on legacy state.\r\n        if (state === 'INSTANCE_STATE_UNSPECIFIED') {\r\n            status = 500;\r\n        }\r\n        else if (state === 'NO_CHANGE') {\r\n            status = 304;\r\n        }\r\n        else if (state === 'NO_TEMPLATE' || state === 'EMPTY_CONFIG') {\r\n            // These cases can be fixed remotely, so normalize to safe value.\r\n            config = {};\r\n        }\r\n        // Normalize to exception-based control flow for non-success cases.\r\n        // Encapsulates HTTP specifics in this class as much as possible. Status is still the best for\r\n        // differentiating success states (200 from 304; the state body param is undefined in a\r\n        // standard 304).\r\n        if (status !== 304 && status !== 200) {\r\n            throw ERROR_FACTORY.create(\"fetch-status\" /* ErrorCode.FETCH_STATUS */, {\r\n                httpStatus: status\r\n            });\r\n        }\r\n        return { status, eTag: responseEtag, config };\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Supports waiting on a backoff by:\r\n *\r\n * <ul>\r\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\r\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\r\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\r\n *       request appear the same.</li>\r\n * </ul>\r\n *\r\n * <p>Visible for testing.\r\n */\r\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\r\n    return new Promise((resolve, reject) => {\r\n        // Derives backoff from given end time, normalizing negative numbers to zero.\r\n        const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\r\n        const timeout = setTimeout(resolve, backoffMillis);\r\n        // Adds listener, rather than sets onabort, because signal is a shared object.\r\n        signal.addEventListener(() => {\r\n            clearTimeout(timeout);\r\n            // If the request completes before this timeout, the rejection has no effect.\r\n            reject(ERROR_FACTORY.create(\"fetch-throttle\" /* ErrorCode.FETCH_THROTTLE */, {\r\n                throttleEndTimeMillis\r\n            }));\r\n        });\r\n    });\r\n}\r\n/**\r\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\r\n */\r\nfunction isRetriableError(e) {\r\n    if (!(e instanceof FirebaseError) || !e.customData) {\r\n        return false;\r\n    }\r\n    // Uses string index defined by ErrorData, which FirebaseError implements.\r\n    const httpStatus = Number(e.customData['httpStatus']);\r\n    return (httpStatus === 429 ||\r\n        httpStatus === 500 ||\r\n        httpStatus === 503 ||\r\n        httpStatus === 504);\r\n}\r\n/**\r\n * Decorates a Client with retry logic.\r\n *\r\n * <p>Comparable to CachingClient, but uses backoff logic instead of cache max age and doesn't cache\r\n * responses (because the SDK has no use for error responses).\r\n */\r\nclass RetryingClient {\r\n    constructor(client, storage) {\r\n        this.client = client;\r\n        this.storage = storage;\r\n    }\r\n    async fetch(request) {\r\n        const throttleMetadata = (await this.storage.getThrottleMetadata()) || {\r\n            backoffCount: 0,\r\n            throttleEndTimeMillis: Date.now()\r\n        };\r\n        return this.attemptFetch(request, throttleMetadata);\r\n    }\r\n    /**\r\n     * A recursive helper for attempting a fetch request repeatedly.\r\n     *\r\n     * @throws any non-retriable errors.\r\n     */\r\n    async attemptFetch(request, { throttleEndTimeMillis, backoffCount }) {\r\n        // Starts with a (potentially zero) timeout to support resumption from stored state.\r\n        // Ensures the throttle end time is honored if the last attempt timed out.\r\n        // Note the SDK will never make a request if the fetch timeout expires at this point.\r\n        await setAbortableTimeout(request.signal, throttleEndTimeMillis);\r\n        try {\r\n            const response = await this.client.fetch(request);\r\n            // Note the SDK only clears throttle state if response is success or non-retriable.\r\n            await this.storage.deleteThrottleMetadata();\r\n            return response;\r\n        }\r\n        catch (e) {\r\n            if (!isRetriableError(e)) {\r\n                throw e;\r\n            }\r\n            // Increments backoff state.\r\n            const throttleMetadata = {\r\n                throttleEndTimeMillis: Date.now() + calculateBackoffMillis(backoffCount),\r\n                backoffCount: backoffCount + 1\r\n            };\r\n            // Persists state.\r\n            await this.storage.setThrottleMetadata(throttleMetadata);\r\n            return this.attemptFetch(request, throttleMetadata);\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DEFAULT_FETCH_TIMEOUT_MILLIS = 60 * 1000; // One minute\r\nconst DEFAULT_CACHE_MAX_AGE_MILLIS = 12 * 60 * 60 * 1000; // Twelve hours.\r\n/**\r\n * Encapsulates business logic mapping network and storage dependencies to the public SDK API.\r\n *\r\n * See {@link https://github.com/FirebasePrivate/firebase-js-sdk/blob/master/packages/firebase/index.d.ts|interface documentation} for method descriptions.\r\n */\r\nclass RemoteConfig {\r\n    constructor(\r\n    // Required by FirebaseServiceFactory interface.\r\n    app, \r\n    // JS doesn't support private yet\r\n    // (https://github.com/tc39/proposal-class-fields#private-fields), so we hint using an\r\n    // underscore prefix.\r\n    /**\r\n     * @internal\r\n     */\r\n    _client, \r\n    /**\r\n     * @internal\r\n     */\r\n    _storageCache, \r\n    /**\r\n     * @internal\r\n     */\r\n    _storage, \r\n    /**\r\n     * @internal\r\n     */\r\n    _logger) {\r\n        this.app = app;\r\n        this._client = _client;\r\n        this._storageCache = _storageCache;\r\n        this._storage = _storage;\r\n        this._logger = _logger;\r\n        /**\r\n         * Tracks completion of initialization promise.\r\n         * @internal\r\n         */\r\n        this._isInitializationComplete = false;\r\n        this.settings = {\r\n            fetchTimeoutMillis: DEFAULT_FETCH_TIMEOUT_MILLIS,\r\n            minimumFetchIntervalMillis: DEFAULT_CACHE_MAX_AGE_MILLIS\r\n        };\r\n        this.defaultConfig = {};\r\n    }\r\n    get fetchTimeMillis() {\r\n        return this._storageCache.getLastSuccessfulFetchTimestampMillis() || -1;\r\n    }\r\n    get lastFetchStatus() {\r\n        return this._storageCache.getLastFetchStatus() || 'no-fetch-yet';\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Converts an error event associated with a {@link IDBRequest} to a {@link FirebaseError}.\r\n */\r\nfunction toFirebaseError(event, errorCode) {\r\n    const originalError = event.target.error || undefined;\r\n    return ERROR_FACTORY.create(errorCode, {\r\n        originalErrorMessage: originalError && (originalError === null || originalError === void 0 ? void 0 : originalError.message)\r\n    });\r\n}\r\n/**\r\n * A general-purpose store keyed by app + namespace + {@link\r\n * ProjectNamespaceKeyFieldValue}.\r\n *\r\n * <p>The Remote Config SDK can be used with multiple app installations, and each app can interact\r\n * with multiple namespaces, so this store uses app (ID + name) and namespace as common parent keys\r\n * for a set of key-value pairs. See {@link Storage#createCompositeKey}.\r\n *\r\n * <p>Visible for testing.\r\n */\r\nconst APP_NAMESPACE_STORE = 'app_namespace_store';\r\nconst DB_NAME = 'firebase_remote_config';\r\nconst DB_VERSION = 1;\r\n// Visible for testing.\r\nfunction openDatabase() {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n            request.onerror = event => {\r\n                reject(toFirebaseError(event, \"storage-open\" /* ErrorCode.STORAGE_OPEN */));\r\n            };\r\n            request.onsuccess = event => {\r\n                resolve(event.target.result);\r\n            };\r\n            request.onupgradeneeded = event => {\r\n                const db = event.target.result;\r\n                // We don't use 'break' in this switch statement, the fall-through\r\n                // behavior is what we want, because if there are multiple versions between\r\n                // the old version and the current version, we want ALL the migrations\r\n                // that correspond to those versions to run, not only the last one.\r\n                // eslint-disable-next-line default-case\r\n                switch (event.oldVersion) {\r\n                    case 0:\r\n                        db.createObjectStore(APP_NAMESPACE_STORE, {\r\n                            keyPath: 'compositeKey'\r\n                        });\r\n                }\r\n            };\r\n        }\r\n        catch (error) {\r\n            reject(ERROR_FACTORY.create(\"storage-open\" /* ErrorCode.STORAGE_OPEN */, {\r\n                originalErrorMessage: error === null || error === void 0 ? void 0 : error.message\r\n            }));\r\n        }\r\n    });\r\n}\r\n/**\r\n * Abstracts data persistence.\r\n */\r\nclass Storage {\r\n    /**\r\n     * @param appId enables storage segmentation by app (ID + name).\r\n     * @param appName enables storage segmentation by app (ID + name).\r\n     * @param namespace enables storage segmentation by namespace.\r\n     */\r\n    constructor(appId, appName, namespace, openDbPromise = openDatabase()) {\r\n        this.appId = appId;\r\n        this.appName = appName;\r\n        this.namespace = namespace;\r\n        this.openDbPromise = openDbPromise;\r\n    }\r\n    getLastFetchStatus() {\r\n        return this.get('last_fetch_status');\r\n    }\r\n    setLastFetchStatus(status) {\r\n        return this.set('last_fetch_status', status);\r\n    }\r\n    // This is comparable to a cache entry timestamp. If we need to expire other data, we could\r\n    // consider adding timestamp to all storage records and an optional max age arg to getters.\r\n    getLastSuccessfulFetchTimestampMillis() {\r\n        return this.get('last_successful_fetch_timestamp_millis');\r\n    }\r\n    setLastSuccessfulFetchTimestampMillis(timestamp) {\r\n        return this.set('last_successful_fetch_timestamp_millis', timestamp);\r\n    }\r\n    getLastSuccessfulFetchResponse() {\r\n        return this.get('last_successful_fetch_response');\r\n    }\r\n    setLastSuccessfulFetchResponse(response) {\r\n        return this.set('last_successful_fetch_response', response);\r\n    }\r\n    getActiveConfig() {\r\n        return this.get('active_config');\r\n    }\r\n    setActiveConfig(config) {\r\n        return this.set('active_config', config);\r\n    }\r\n    getActiveConfigEtag() {\r\n        return this.get('active_config_etag');\r\n    }\r\n    setActiveConfigEtag(etag) {\r\n        return this.set('active_config_etag', etag);\r\n    }\r\n    getThrottleMetadata() {\r\n        return this.get('throttle_metadata');\r\n    }\r\n    setThrottleMetadata(metadata) {\r\n        return this.set('throttle_metadata', metadata);\r\n    }\r\n    deleteThrottleMetadata() {\r\n        return this.delete('throttle_metadata');\r\n    }\r\n    async get(key) {\r\n        const db = await this.openDbPromise;\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = db.transaction([APP_NAMESPACE_STORE], 'readonly');\r\n            const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\r\n            const compositeKey = this.createCompositeKey(key);\r\n            try {\r\n                const request = objectStore.get(compositeKey);\r\n                request.onerror = event => {\r\n                    reject(toFirebaseError(event, \"storage-get\" /* ErrorCode.STORAGE_GET */));\r\n                };\r\n                request.onsuccess = event => {\r\n                    const result = event.target.result;\r\n                    if (result) {\r\n                        resolve(result.value);\r\n                    }\r\n                    else {\r\n                        resolve(undefined);\r\n                    }\r\n                };\r\n            }\r\n            catch (e) {\r\n                reject(ERROR_FACTORY.create(\"storage-get\" /* ErrorCode.STORAGE_GET */, {\r\n                    originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    async set(key, value) {\r\n        const db = await this.openDbPromise;\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\r\n            const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\r\n            const compositeKey = this.createCompositeKey(key);\r\n            try {\r\n                const request = objectStore.put({\r\n                    compositeKey,\r\n                    value\r\n                });\r\n                request.onerror = (event) => {\r\n                    reject(toFirebaseError(event, \"storage-set\" /* ErrorCode.STORAGE_SET */));\r\n                };\r\n                request.onsuccess = () => {\r\n                    resolve();\r\n                };\r\n            }\r\n            catch (e) {\r\n                reject(ERROR_FACTORY.create(\"storage-set\" /* ErrorCode.STORAGE_SET */, {\r\n                    originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    async delete(key) {\r\n        const db = await this.openDbPromise;\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\r\n            const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\r\n            const compositeKey = this.createCompositeKey(key);\r\n            try {\r\n                const request = objectStore.delete(compositeKey);\r\n                request.onerror = (event) => {\r\n                    reject(toFirebaseError(event, \"storage-delete\" /* ErrorCode.STORAGE_DELETE */));\r\n                };\r\n                request.onsuccess = () => {\r\n                    resolve();\r\n                };\r\n            }\r\n            catch (e) {\r\n                reject(ERROR_FACTORY.create(\"storage-delete\" /* ErrorCode.STORAGE_DELETE */, {\r\n                    originalErrorMessage: e === null || e === void 0 ? void 0 : e.message\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    // Facilitates composite key functionality (which is unsupported in IE).\r\n    createCompositeKey(key) {\r\n        return [this.appId, this.appName, this.namespace, key].join();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A memory cache layer over storage to support the SDK's synchronous read requirements.\r\n */\r\nclass StorageCache {\r\n    constructor(storage) {\r\n        this.storage = storage;\r\n    }\r\n    /**\r\n     * Memory-only getters\r\n     */\r\n    getLastFetchStatus() {\r\n        return this.lastFetchStatus;\r\n    }\r\n    getLastSuccessfulFetchTimestampMillis() {\r\n        return this.lastSuccessfulFetchTimestampMillis;\r\n    }\r\n    getActiveConfig() {\r\n        return this.activeConfig;\r\n    }\r\n    /**\r\n     * Read-ahead getter\r\n     */\r\n    async loadFromStorage() {\r\n        const lastFetchStatusPromise = this.storage.getLastFetchStatus();\r\n        const lastSuccessfulFetchTimestampMillisPromise = this.storage.getLastSuccessfulFetchTimestampMillis();\r\n        const activeConfigPromise = this.storage.getActiveConfig();\r\n        // Note:\r\n        // 1. we consistently check for undefined to avoid clobbering defined values\r\n        //   in memory\r\n        // 2. we defer awaiting to improve readability, as opposed to destructuring\r\n        //   a Promise.all result, for example\r\n        const lastFetchStatus = await lastFetchStatusPromise;\r\n        if (lastFetchStatus) {\r\n            this.lastFetchStatus = lastFetchStatus;\r\n        }\r\n        const lastSuccessfulFetchTimestampMillis = await lastSuccessfulFetchTimestampMillisPromise;\r\n        if (lastSuccessfulFetchTimestampMillis) {\r\n            this.lastSuccessfulFetchTimestampMillis =\r\n                lastSuccessfulFetchTimestampMillis;\r\n        }\r\n        const activeConfig = await activeConfigPromise;\r\n        if (activeConfig) {\r\n            this.activeConfig = activeConfig;\r\n        }\r\n    }\r\n    /**\r\n     * Write-through setters\r\n     */\r\n    setLastFetchStatus(status) {\r\n        this.lastFetchStatus = status;\r\n        return this.storage.setLastFetchStatus(status);\r\n    }\r\n    setLastSuccessfulFetchTimestampMillis(timestampMillis) {\r\n        this.lastSuccessfulFetchTimestampMillis = timestampMillis;\r\n        return this.storage.setLastSuccessfulFetchTimestampMillis(timestampMillis);\r\n    }\r\n    setActiveConfig(activeConfig) {\r\n        this.activeConfig = activeConfig;\r\n        return this.storage.setActiveConfig(activeConfig);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerRemoteConfig() {\r\n    _registerComponent(new Component(RC_COMPONENT_NAME, remoteConfigFactory, \"PUBLIC\" /* ComponentType.PUBLIC */).setMultipleInstances(true));\r\n    registerVersion(name, version);\r\n    // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n    registerVersion(name, version, 'esm2017');\r\n    function remoteConfigFactory(container, { instanceIdentifier: namespace }) {\r\n        /* Dependencies */\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app').getImmediate();\r\n        // The following call will always succeed because rc has `import '@firebase/installations'`\r\n        const installations = container\r\n            .getProvider('installations-internal')\r\n            .getImmediate();\r\n        // Guards against the SDK being used in non-browser environments.\r\n        if (typeof window === 'undefined') {\r\n            throw ERROR_FACTORY.create(\"registration-window\" /* ErrorCode.REGISTRATION_WINDOW */);\r\n        }\r\n        // Guards against the SDK being used when indexedDB is not available.\r\n        if (!isIndexedDBAvailable()) {\r\n            throw ERROR_FACTORY.create(\"indexed-db-unavailable\" /* ErrorCode.INDEXED_DB_UNAVAILABLE */);\r\n        }\r\n        // Normalizes optional inputs.\r\n        const { projectId, apiKey, appId } = app.options;\r\n        if (!projectId) {\r\n            throw ERROR_FACTORY.create(\"registration-project-id\" /* ErrorCode.REGISTRATION_PROJECT_ID */);\r\n        }\r\n        if (!apiKey) {\r\n            throw ERROR_FACTORY.create(\"registration-api-key\" /* ErrorCode.REGISTRATION_API_KEY */);\r\n        }\r\n        if (!appId) {\r\n            throw ERROR_FACTORY.create(\"registration-app-id\" /* ErrorCode.REGISTRATION_APP_ID */);\r\n        }\r\n        namespace = namespace || 'firebase';\r\n        const storage = new Storage(appId, app.name, namespace);\r\n        const storageCache = new StorageCache(storage);\r\n        const logger = new Logger(name);\r\n        // Sets ERROR as the default log level.\r\n        // See RemoteConfig#setLogLevel for corresponding normalization to ERROR log level.\r\n        logger.logLevel = LogLevel.ERROR;\r\n        const restClient = new RestClient(installations, \r\n        // Uses the JS SDK version, by which the RC package version can be deduced, if necessary.\r\n        SDK_VERSION, namespace, projectId, apiKey, appId);\r\n        const retryingClient = new RetryingClient(restClient, storage);\r\n        const cachingClient = new CachingClient(retryingClient, storage, storageCache, logger);\r\n        const remoteConfigInstance = new RemoteConfig(app, cachingClient, storageCache, storage, logger);\r\n        // Starts warming cache.\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        ensureInitialized(remoteConfigInstance);\r\n        return remoteConfigInstance;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// This API is put in a separate file, so we can stub fetchConfig and activate in tests.\r\n// It's not possible to stub standalone functions from the same module.\r\n/**\r\n *\r\n * Performs fetch and activate operations, as a convenience.\r\n *\r\n * @param remoteConfig - The {@link RemoteConfig} instance.\r\n *\r\n * @returns A `Promise` which resolves to true if the current call activated the fetched configs.\r\n * If the fetched configs were already activated, the `Promise` will resolve to false.\r\n *\r\n * @public\r\n */\r\nasync function fetchAndActivate(remoteConfig) {\r\n    remoteConfig = getModularInstance(remoteConfig);\r\n    await fetchConfig(remoteConfig);\r\n    return activate(remoteConfig);\r\n}\r\n/**\r\n * This method provides two different checks:\r\n *\r\n * 1. Check if IndexedDB exists in the browser environment.\r\n * 2. Check if the current browser context allows IndexedDB `open()` calls.\r\n *\r\n * @returns A `Promise` which resolves to true if a {@link RemoteConfig} instance\r\n * can be initialized in this environment, or false if it cannot.\r\n * @public\r\n */\r\nasync function isSupported() {\r\n    if (!isIndexedDBAvailable()) {\r\n        return false;\r\n    }\r\n    try {\r\n        const isDBOpenable = await validateIndexedDBOpenable();\r\n        return isDBOpenable;\r\n    }\r\n    catch (error) {\r\n        return false;\r\n    }\r\n}\n\n/**\r\n * Firebase Remote Config\r\n *\r\n * @packageDocumentation\r\n */\r\n/** register component and version */\r\nregisterRemoteConfig();\n\nexport { activate, ensureInitialized, fetchAndActivate, fetchConfig, getAll, getBoolean, getNumber, getRemoteConfig, getString, getValue, isSupported, setLogLevel };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}