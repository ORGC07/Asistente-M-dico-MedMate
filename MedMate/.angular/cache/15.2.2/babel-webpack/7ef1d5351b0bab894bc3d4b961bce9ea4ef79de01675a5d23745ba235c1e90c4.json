{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/firestore.service\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@angular/common\";\nfunction VcitasPage_ion_item_group_8_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 7)(1, \"ion-label\")(2, \"h2\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h4\", 9)(5, \"b\");\n    i0.ɵɵtext(6, \"Especialidad: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h4\", 9)(9, \"b\");\n    i0.ɵɵtext(10, \"Estado: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"h4\", 9)(13, \"b\");\n    i0.ɵɵtext(14, \"Fecha: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"h4\", 9)(17, \"b\");\n    i0.ɵɵtext(18, \"Hora: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"ion-buttons\", 10)(21, \"ion-button\", 11);\n    i0.ɵɵlistener(\"click\", function VcitasPage_ion_item_group_8_ion_item_1_Template_ion_button_click_21_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const cita_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.delete(cita_r2));\n    });\n    i0.ɵɵelement(22, \"ion-icon\", 12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cita_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Dr. \", cita_r2.doctor, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", cita_r2.especialidad, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", cita_r2.estado, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", cita_r2.fecha, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(cita_r2.hora);\n  }\n}\nfunction VcitasPage_ion_item_group_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item-group\", 5);\n    i0.ɵɵtemplate(1, VcitasPage_ion_item_group_8_ion_item_1_Template, 23, 5, \"ion-item\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.citas);\n  }\n}\nconst _c0 = function () {\n  return [\"/home\"];\n};\nexport let VcitasPage = /*#__PURE__*/(() => {\n  class VcitasPage {\n    constructor(auth, router, store, loadingCtrl, toastController, alertController) {\n      this.auth = auth;\n      this.router = router;\n      this.store = store;\n      this.loadingCtrl = loadingCtrl;\n      this.toastController = toastController;\n      this.alertController = alertController;\n      this.citas = [];\n      this.infoc = {\n        doctor: \"\",\n        iddoctor: \"\",\n        paciente: \"\",\n        idpaciente: \"\",\n        especialidad: \"\",\n        fecha: new Date(),\n        hora: 0,\n        id: \"\",\n        estado: \"\"\n      };\n      this.path = \"Citas\";\n    }\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const uid = yield this.auth.getUid();\n        if (uid) {\n          this.uid = uid;\n          this.cita();\n        }\n      });\n    }\n    cita() {\n      this.store.consultar(this.path).subscribe(res => {\n        if (res) {\n          this.citas = [];\n          res.forEach(r => {\n            if (r.idpaciente == this.uid) {\n              this.infoc = r;\n              this.citas.push(this.infoc);\n            }\n          });\n        }\n      });\n    }\n    delete(medicamento) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          cssClass: \"normal\",\n          header: \"Advertencia\",\n          message: \"¿Seguro que deseas <strong>eliminar</strong> esta cita?\",\n          buttons: [{\n            text: \"Cancelar\",\n            role: \"cancel\",\n            cssClass: \"normal\",\n            handler: () => {\n              console.log(\"Alert canceled\");\n            }\n          }, {\n            text: \"OK\",\n            role: \"confirm\",\n            handler: () => {\n              console.log(\"Alert confirmed\");\n              this.store.deletedoc(this.path, medicamento.id).then(res => {\n                this.alertController.dismiss();\n                this.presentToast(\"Eliminado con exito\");\n              }).catch(error => {\n                this.presentToast(\"No se pudo eliminar\");\n              });\n            }\n          }]\n        });\n        yield alert.present();\n      });\n    }\n    showLoading() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.loading = yield this.loadingCtrl.create({\n          cssClass: \"normal\",\n          message: \"Guardando...\",\n          spinner: \"circles\"\n        });\n        yield this.loading.present();\n      });\n    }\n    presentToast(msg) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          cssClass: \"normal\",\n          message: msg,\n          duration: 2000,\n          icon: \"thumbs-up-outline\",\n          color: \"light\"\n        });\n        yield toast.present();\n      });\n    }\n  }\n  VcitasPage.ɵfac = function VcitasPage_Factory(t) {\n    return new (t || VcitasPage)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FirestoreService), i0.ɵɵdirectiveInject(i4.LoadingController), i0.ɵɵdirectiveInject(i4.ToastController), i0.ɵɵdirectiveInject(i4.AlertController));\n  };\n  VcitasPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VcitasPage,\n    selectors: [[\"app-vcitas\"]],\n    decls: 9,\n    vars: 3,\n    consts: [[\"color\", \"principal\"], [\"color\", \"blanco\", \"fill\", \"clear\", \"slot\", \"start\", 3, \"routerLink\"], [\"name\", \"arrow-back-outline\"], [\"color\", \"blanco\", 1, \"ion-padding\"], [\"class\", \"custom-list\", 4, \"ngIf\"], [1, \"custom-list\"], [\"color\", \"relleno\", \"color\", \"light\", 4, \"ngFor\", \"ngForOf\"], [\"color\", \"relleno\", \"color\", \"light\"], [1, \"normal\"], [1, \"peque\\u00F1a\"], [\"slot\", \"end\"], [3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"trash-outline\", \"color\", \"danger\"]],\n    template: function VcitasPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Citas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-button\", 1);\n        i0.ɵɵelement(5, \"ion-icon\", 2);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\")(7, \"ion-content\", 3);\n        i0.ɵɵtemplate(8, VcitasPage_ion_item_group_8_Template, 2, 1, \"ion-item-group\", 4);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.citas);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i4.IonButton, i4.IonButtons, i4.IonContent, i4.IonHeader, i4.IonIcon, i4.IonItem, i4.IonItemGroup, i4.IonLabel, i4.IonTitle, i4.IonToolbar, i4.RouterLinkDelegate, i2.RouterLink]\n  });\n  return VcitasPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}